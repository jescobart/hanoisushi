import{r as b,j as d}from"./jsx-runtime-BGxL3LVy.js";import{M as Me}from"./index-DQcw9fEh.js";import{a as v}from"./index-DUyAALTD.js";import{h as Le}from"./react-icons.esm-D-bY5_Bc.js";import{B as j}from"./index-cWEE_j1p.js";import{P as Ae,a as Ve,b as Ee,C as De,c as Pe,d as $e,e as Re,f as We,g as Be}from"./popover-LlYgTbu8.js";import{c as F}from"./index-DYTzf-DC.js";import{B as Ge}from"./button-B9Ixe4GG.js";import{r as Je}from"./range-CqIzUPl_.js";import{s as q}from"./sleep-BvINh1mj.js";import{S as qe}from"./skeleton-jaTN8ZDn.js";import{W as Qe,$ as Ue}from"./apollo-hooks.es-DZ97-Of4.js";import{d as Ke}from"./dayjs.min-C_B9Zj0p.js";import{g as re}from"./gql-CqV_3job.js";import{c as ae}from"./index-Dg1ijqza.js";import{u as A}from"./useTranslation-B_PywvDf.js";import{T as ce}from"./index-DnxNFHVa.js";import{a as He,u as Ye}from"./useWebsite-B2NA3eOh.js";import{c as Ze,u as Xe,a as et,P as V,b as P,d as tt}from"./index-C7wa7IgK.js";import{c as de,R as st,I as nt}from"./dropdown-menu-YfhecZr1.js";import{u as it}from"./index-BLnOCR5Q.js";import{c as H}from"./utils-mMyIM9tf.js";import{C as $}from"./index-BJo8DL8B.js";import{A as te}from"./index-Bzd9UY_1.js";import{b as ot}from"./Context-BxTGfssI.js";import{L as rt}from"./components-C7TJjWXG.js";var Y="Tabs",[at,es]=Ze(Y,[de]),le=de(),[ct,Z]=at(Y),ue=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,onValueChange:i,defaultValue:o,orientation:r="horizontal",dir:a,activationMode:c="automatic",...l}=n,u=it(a),[h,f]=Xe({prop:s,onChange:i,defaultProp:o});return d.jsx(ct,{scope:t,baseId:et(),value:h,onValueChange:f,orientation:r,dir:u,activationMode:c,children:d.jsx(V.div,{dir:u,"data-orientation":r,...l,ref:e})})});ue.displayName=Y;var he="TabsList",fe=b.forwardRef((n,e)=>{const{__scopeTabs:t,loop:s=!0,...i}=n,o=Z(he,t),r=le(t);return d.jsx(st,{asChild:!0,...r,orientation:o.orientation,dir:o.dir,loop:s,children:d.jsx(V.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:e})})});fe.displayName=he;var me="TabsTrigger",pe=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,disabled:i=!1,...o}=n,r=Z(me,t),a=le(t),c=be(r.baseId,s),l=ye(r.baseId,s),u=s===r.value;return d.jsx(nt,{asChild:!0,...a,focusable:!i,active:u,children:d.jsx(V.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...o,ref:e,onMouseDown:P(n.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?r.onValueChange(s):h.preventDefault()}),onKeyDown:P(n.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&r.onValueChange(s)}),onFocus:P(n.onFocus,()=>{const h=r.activationMode!=="manual";!u&&!i&&h&&r.onValueChange(s)})})})});pe.displayName=me;var ge="TabsContent",_e=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,forceMount:i,children:o,...r}=n,a=Z(ge,t),c=be(a.baseId,s),l=ye(a.baseId,s),u=s===a.value,h=b.useRef(u);return b.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),d.jsx(tt,{present:i||u,children:({present:f})=>d.jsx(V.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...r,ref:e,style:{...n.style,animationDuration:h.current?"0s":void 0},children:f&&o})})});_e.displayName=ge;function be(n,e){return`${n}-trigger-${e}`}function ye(n,e){return`${n}-content-${e}`}var dt=ue,ve=fe,xe=pe,we=_e;const lt=dt,je=b.forwardRef(({className:n,...e},t)=>d.jsx(ve,{ref:t,className:H("inline-flex min-h-[2.25rem] items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground flex-wrap",n),...e}));je.displayName=ve.displayName;const Se=b.forwardRef(({className:n,...e},t)=>d.jsx(xe,{ref:t,className:H("inline-flex items-center justify-center whitespace-normal rounded-md px-2 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow min-w-[80px] text-center break-words",n),...e}));Se.displayName=xe.displayName;const ut=b.forwardRef(({className:n,...e},t)=>d.jsx(we,{ref:t,className:H("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));ut.displayName=we.displayName;function ht(n){const[e,t]=b.useState(!1);return d.jsxs(Ae,{open:e,onOpenChange:t,modal:!0,children:[d.jsx(Ve,{asChild:!0,children:n.children}),d.jsx(Ee,{className:"w-[200px] p-0",children:d.jsxs(De,{children:[d.jsx(Pe,{placeholder:n.placeholder||"Filtrar opciones..."}),d.jsxs($e,{children:[d.jsx(Re,{children:n.notFoundText||"No se encontraron resultados"}),d.jsx(We,{children:n.options.map((s,i)=>d.jsx(Be,{onSelect:()=>{s.action(),t(!1)},children:s.label},i))})]})]})})]})}function ft(n){var u;const e=Ke().add(n,"days").startOf("day").add(3,"hours").format(),t=v(h=>h.preferences),{storeId:s,deliveryType:i,paymentType:o,address:r}=t,a=r==null?void 0:r.placeId,{data:c,loading:l}=Qe({clientName:ae.main,query:re(`query getDeliveryTimeTimeOptionsForOrderTimeInput(
      $storeId: ID
      $date: Date
      $deliveryType: String
      $paymentType: String
      $placeId: String
    ) {
      
      store (storeId: $storeId) {
        _id
        timeOptions(date: $date, deliveryType: $deliveryType, paymentType: $paymentType, placeId: $placeId) {
          label
          value
          disabled
        }
      }
    }`),variables:{date:e,storeId:s,deliveryType:i,paymentType:o,placeId:a}});return{loading:l,timeOptions:((u=c==null?void 0:c.store)==null?void 0:u.timeOptions)||[]}}function mt(n){const{loading:e,timeOptions:t}=ft(n.days),{t:s}=A(),i=v(c=>c.preferences),o=v(c=>c.setTime),r=v(c=>c.setChooseTimeOpen),{time:a}=i;return e?d.jsx("div",{className:" space-y-2",children:Je(6).map(c=>d.jsx(j,{full:!0,variant:"secondary",className:"text-left h-14 font-bold",children:d.jsx(qe,{className:"w-[150px] h-4"})},c))}):d.jsxs("div",{className:" space-y-2",children:[n.days===0&&n.itsOpenNow&&!n.disableNowOrders?d.jsx(j,{full:!0,variant:a==="now"?"default":"secondary",className:"text-left h-14 font-bold",onClick:async()=>{await q(300),r(!1),o("now")},children:s("round_next_ape_hope")}):null,t.map((c,l)=>{const u=a.split("+")[0],h=a.split("+")[1]===String(n.days),f=c.value===u&&h;return c.disabled?null:d.jsx(j,{full:!0,variant:f?"default":"secondary",className:"text-left h-14 font-bold",onClick:async()=>{await q(300),r(!1);const g=`${c.value}+${n.days}`;o(g)},children:c.label},l)})]})}function pt(){var g;const n=v(m=>m.setChooseTimeOpen),{t:e}=A(),t=v(m=>{var p;return(p=m.preferences)==null?void 0:p.store}),s=v(m=>{var p;return(p=m.preferences)==null?void 0:p.time}),i=s==="now"?"0":s.split("+")[1],[o,r]=b.useState(i),a=(t==null?void 0:t.availableScheduleDaysOptions)||[];a.length>0&&!a.some(m=>m.value===o)&&r(a[0].value);const c=a.length>4,l=c?a.slice(0,3):a,u=a.slice(3,a.length),h=u.some(m=>m.value===o),f=(g=a.find(m=>m.value===o))==null?void 0:g.label;return d.jsxs("div",{className:"space-y-5",children:[d.jsx(F,{children:e("trick_mellow_warthog_praise")}),d.jsxs("div",{className:"grid grid-cols-4 gap-2 items-center",children:[l.map(m=>d.jsx(j,{variant:o===m.value?"default":"secondary",className:"capitalize h-12",onClick:()=>r(m.value),children:d.jsx("div",{children:m.label.split(" ").map(p=>d.jsx("div",{children:p},p))})},m.label)),c&&d.jsx(ht,{options:u.map(m=>({label:m.label,action:()=>r(m.value)})),placeholder:"Selecciona un dia",children:d.jsx(Ge,{variant:h?"default":"secondary",className:"capitalize h-12",children:h?d.jsx("div",{children:f.split(" ").map(m=>d.jsx("div",{children:m},m))}):d.jsxs(d.Fragment,{children:[e("fair_mild_cod_launch"),d.jsx(Le,{className:"ml-2 h-5 w-5"})]})})})]}),d.jsx(mt,{days:Number(o),itsOpenNow:t==null?void 0:t.itsOpenNow,disableNowOrders:t==null?void 0:t.disableNowOrders}),d.jsx(j,{full:!0,variant:"ghost",onClick:()=>n(!1),children:e("muddy_candid_robin_blend")})]})}function ts(){const n=v(t=>t==null?void 0:t.chooseTimeOpen),e=v(t=>t==null?void 0:t.setChooseTimeOpen);return d.jsx(Me,{size:"lg",open:n,onOpenChange:e,children:e&&d.jsx(pt,{})})}function M(n,e,t,s){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(u){try{l(s.next(u))}catch(h){r(h)}}function c(u){try{l(s.throw(u))}catch(h){r(h)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((s=s.apply(n,[])).next())})}const gt="ENTRIES",Te="KEYS",Ce="VALUES",y="";class R{constructor(e,t){const s=e._tree,i=Array.from(s.keys());this.set=e,this._type=t,this._path=i.length>0?[{node:s,keys:i}]:[]}next(){const e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:e,keys:t}=C(this._path);if(C(t)===y)return{done:!1,value:this.result()};const s=e.get(C(t));return this._path.push({node:s,keys:Array.from(s.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const e=C(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>C(e)).filter(e=>e!==y).join("")}value(){return C(this._path).node.get(y)}result(){switch(this._type){case Ce:return this.value();case Te:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const C=n=>n[n.length-1],_t=(n,e,t)=>{const s=new Map;if(e===void 0)return s;const i=e.length+1,o=i+t,r=new Uint8Array(o*i).fill(t+1);for(let a=0;a<i;++a)r[a]=a;for(let a=1;a<o;++a)r[a*i]=a;return Ie(n,e,t,s,r,1,i,""),s},Ie=(n,e,t,s,i,o,r,a)=>{const c=o*r;e:for(const l of n.keys())if(l===y){const u=i[c-1];u<=t&&s.set(a,[n.get(l),u])}else{let u=o;for(let h=0;h<l.length;++h,++u){const f=l[h],g=r*u,m=g-r;let p=i[g];const _=Math.max(0,u-t-1),w=Math.min(r-1,u+t);for(let x=_;x<w;++x){const E=f!==e[x],D=i[m+x]+ +E,O=i[m+x+1]+1,T=i[g+x]+1,k=i[g+x+1]=Math.min(D,O,T);k<p&&(p=k)}if(p>t)continue e}Ie(n.get(l),e,t,s,i,u,r,a+l)}};class S{constructor(e=new Map,t=""){this._size=void 0,this._tree=e,this._prefix=t}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");const[t,s]=L(this._tree,e.slice(this._prefix.length));if(t===void 0){const[i,o]=X(s);for(const r of i.keys())if(r!==y&&r.startsWith(o)){const a=new Map;return a.set(r.slice(o.length),i.get(r)),new S(a,e)}}return new S(t,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,bt(this._tree,e)}entries(){return new R(this,gt)}forEach(e){for(const[t,s]of this)e(t,s,this)}fuzzyGet(e,t){return _t(this._tree,e,t)}get(e){const t=Q(this._tree,e);return t!==void 0?t.get(y):void 0}has(e){const t=Q(this._tree,e);return t!==void 0&&t.has(y)}keys(){return new R(this,Te)}set(e,t){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,W(this._tree,e).set(y,t),this}get size(){if(this._size)return this._size;this._size=0;const e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const s=W(this._tree,e);return s.set(y,t(s.get(y))),this}fetch(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const s=W(this._tree,e);let i=s.get(y);return i===void 0&&s.set(y,i=t()),i}values(){return new R(this,Ce)}[Symbol.iterator](){return this.entries()}static from(e){const t=new S;for(const[s,i]of e)t.set(s,i);return t}static fromObject(e){return S.from(Object.entries(e))}}const L=(n,e,t=[])=>{if(e.length===0||n==null)return[n,t];for(const s of n.keys())if(s!==y&&e.startsWith(s))return t.push([n,s]),L(n.get(s),e.slice(s.length),t);return t.push([n,e]),L(void 0,"",t)},Q=(n,e)=>{if(e.length===0||n==null)return n;for(const t of n.keys())if(t!==y&&e.startsWith(t))return Q(n.get(t),e.slice(t.length))},W=(n,e)=>{const t=e.length;e:for(let s=0;n&&s<t;){for(const o of n.keys())if(o!==y&&e[s]===o[0]){const r=Math.min(t-s,o.length);let a=1;for(;a<r&&e[s+a]===o[a];)++a;const c=n.get(o);if(a===o.length)n=c;else{const l=new Map;l.set(o.slice(a),c),n.set(e.slice(s,s+a),l),n.delete(o),n=l}s+=a;continue e}const i=new Map;return n.set(e.slice(s),i),i}return n},bt=(n,e)=>{const[t,s]=L(n,e);if(t!==void 0){if(t.delete(y),t.size===0)ke(s);else if(t.size===1){const[i,o]=t.entries().next().value;Oe(s,i,o)}}},ke=n=>{if(n.length===0)return;const[e,t]=X(n);if(e.delete(t),e.size===0)ke(n.slice(0,-1));else if(e.size===1){const[s,i]=e.entries().next().value;s!==y&&Oe(n.slice(0,-1),s,i)}},Oe=(n,e,t)=>{if(n.length===0)return;const[s,i]=X(n);s.set(i+e,t),s.delete(i)},X=n=>n[n.length-1],ee="or",ze="and",yt="and_not";class I{constructor(e){if((e==null?void 0:e.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');const t=e.autoVacuum==null||e.autoVacuum===!0?J:e.autoVacuum;this._options=Object.assign(Object.assign(Object.assign({},G),e),{autoVacuum:t,searchOptions:Object.assign(Object.assign({},se),e.searchOptions||{}),autoSuggestOptions:Object.assign(Object.assign({},St),e.autoSuggestOptions||{})}),this._index=new S,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=K,this.addFields(this._options.fields)}add(e){const{extractField:t,tokenize:s,processTerm:i,fields:o,idField:r}=this._options,a=t(e,r);if(a==null)throw new Error(`MiniSearch: document does not have ID field "${r}"`);if(this._idToShortId.has(a))throw new Error(`MiniSearch: duplicate ID ${a}`);const c=this.addDocumentId(a);this.saveStoredFields(c,e);for(const l of o){const u=t(e,l);if(u==null)continue;const h=s(u.toString(),l),f=this._fieldIds[l],g=new Set(h).size;this.addFieldLength(c,f,this._documentCount-1,g);for(const m of h){const p=i(m,l);if(Array.isArray(p))for(const _ of p)this.addTerm(f,c,_);else p&&this.addTerm(f,c,p)}}}addAll(e){for(const t of e)this.add(t)}addAllAsync(e,t={}){const{chunkSize:s=10}=t,i={chunk:[],promise:Promise.resolve()},{chunk:o,promise:r}=e.reduce(({chunk:a,promise:c},l,u)=>(a.push(l),(u+1)%s===0?{chunk:[],promise:c.then(()=>new Promise(h=>setTimeout(h,0))).then(()=>this.addAll(a))}:{chunk:a,promise:c}),i);return r.then(()=>this.addAll(o))}remove(e){const{tokenize:t,processTerm:s,extractField:i,fields:o,idField:r}=this._options,a=i(e,r);if(a==null)throw new Error(`MiniSearch: document does not have ID field "${r}"`);const c=this._idToShortId.get(a);if(c==null)throw new Error(`MiniSearch: cannot remove document with ID ${a}: it is not in the index`);for(const l of o){const u=i(e,l);if(u==null)continue;const h=t(u.toString(),l),f=this._fieldIds[l],g=new Set(h).size;this.removeFieldLength(c,f,this._documentCount,g);for(const m of h){const p=s(m,l);if(Array.isArray(p))for(const _ of p)this.removeTerm(f,c,_);else p&&this.removeTerm(f,c,p)}}this._storedFields.delete(c),this._documentIds.delete(c),this._idToShortId.delete(a),this._fieldLength.delete(c),this._documentCount-=1}removeAll(e){if(e)for(const t of e)this.remove(t);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new S,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){const t=this._idToShortId.get(e);if(t==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(t),this._storedFields.delete(t),(this._fieldLength.get(t)||[]).forEach((s,i)=>{this.removeFieldLength(t,i,this._documentCount,s)}),this._fieldLength.delete(t),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:e,minDirtCount:t,batchSize:s,batchWait:i}=this._options.autoVacuum;this.conditionalVacuum({batchSize:s,batchWait:i},{minDirtCount:t,minDirtFactor:e})}discardAll(e){const t=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const s of e)this.discard(s)}finally{this._options.autoVacuum=t}this.maybeAutoVacuum()}replace(e){const{idField:t,extractField:s}=this._options,i=s(e,t);this.discard(i),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,t){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&t,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const s=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=K,this.performVacuuming(e,s)}),this._enqueuedVacuum)):this.vacuumConditionsMet(t)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}performVacuuming(e,t){return M(this,void 0,void 0,function*(){const s=this._dirtCount;if(this.vacuumConditionsMet(t)){const i=e.batchSize||U.batchSize,o=e.batchWait||U.batchWait;let r=1;for(const[a,c]of this._index){for(const[l,u]of c)for(const[h]of u)this._documentIds.has(h)||(u.size<=1?c.delete(l):u.delete(h));this._index.get(a).size===0&&this._index.delete(a),r%i===0&&(yield new Promise(l=>setTimeout(l,o))),r+=1}this._dirtCount-=s}yield null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null})}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:t,minDirtFactor:s}=e;return t=t||J.minDirtCount,s=s||J.minDirtFactor,this.dirtCount>=t&&this.dirtFactor>=s}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){const t=this._idToShortId.get(e);if(t!=null)return this._storedFields.get(t)}search(e,t={}){const s=this.executeQuery(e,t),i=[];for(const[o,{score:r,terms:a,match:c}]of s){const l=a.length||1,u={id:this._documentIds.get(o),score:r*l,terms:Object.keys(c),queryTerms:a,match:c};Object.assign(u,this._storedFields.get(o)),(t.filter==null||t.filter(u))&&i.push(u)}return e===I.wildcard&&t.boostDocument==null&&this._options.searchOptions.boostDocument==null||i.sort(ie),i}autoSuggest(e,t={}){t=Object.assign(Object.assign({},this._options.autoSuggestOptions),t);const s=new Map;for(const{score:o,terms:r}of this.search(e,t)){const a=r.join(" "),c=s.get(a);c!=null?(c.score+=o,c.count+=1):s.set(a,{score:o,terms:r,count:1})}const i=[];for(const[o,{score:r,terms:a,count:c}]of s)i.push({suggestion:o,terms:a,score:r/c});return i.sort(ie),i}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),t)}static loadJSONAsync(e,t){return M(this,void 0,void 0,function*(){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),t)})}static getDefault(e){if(G.hasOwnProperty(e))return B(G,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,t){const{index:s,documentIds:i,fieldLength:o,storedFields:r,serializationVersion:a}=e,c=this.instantiateMiniSearch(e,t);c._documentIds=z(i),c._fieldLength=z(o),c._storedFields=z(r);for(const[l,u]of c._documentIds)c._idToShortId.set(u,l);for(const[l,u]of s){const h=new Map;for(const f of Object.keys(u)){let g=u[f];a===1&&(g=g.ds),h.set(parseInt(f,10),z(g))}c._index.set(l,h)}return c}static loadJSAsync(e,t){return M(this,void 0,void 0,function*(){const{index:s,documentIds:i,fieldLength:o,storedFields:r,serializationVersion:a}=e,c=this.instantiateMiniSearch(e,t);c._documentIds=yield N(i),c._fieldLength=yield N(o),c._storedFields=yield N(r);for(const[u,h]of c._documentIds)c._idToShortId.set(h,u);let l=0;for(const[u,h]of s){const f=new Map;for(const g of Object.keys(h)){let m=h[g];a===1&&(m=m.ds),f.set(parseInt(g,10),yield N(m))}++l%1e3===0&&(yield Ne(0)),c._index.set(u,f)}return c})}static instantiateMiniSearch(e,t){const{documentCount:s,nextId:i,fieldIds:o,averageFieldLength:r,dirtCount:a,serializationVersion:c}=e;if(c!==1&&c!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const l=new I(t);return l._documentCount=s,l._nextId=i,l._idToShortId=new Map,l._fieldIds=o,l._avgFieldLength=r,l._dirtCount=a||0,l._index=new S,l}executeQuery(e,t={}){if(e===I.wildcard)return this.executeWildcardQuery(t);if(typeof e!="string"){const f=Object.assign(Object.assign(Object.assign({},t),e),{queries:void 0}),g=e.queries.map(m=>this.executeQuery(m,f));return this.combineResults(g,f.combineWith)}const{tokenize:s,processTerm:i,searchOptions:o}=this._options,r=Object.assign(Object.assign({tokenize:s,processTerm:i},o),t),{tokenize:a,processTerm:c}=r,h=a(e).flatMap(f=>c(f)).filter(f=>!!f).map(jt(r)).map(f=>this.executeQuerySpec(f,r));return this.combineResults(h,r.combineWith)}executeQuerySpec(e,t){const s=Object.assign(Object.assign({},this._options.searchOptions),t),i=(s.fields||this._options.fields).reduce((p,_)=>Object.assign(Object.assign({},p),{[_]:B(s.boost,_)||1}),{}),{boostDocument:o,weights:r,maxFuzzy:a,bm25:c}=s,{fuzzy:l,prefix:u}=Object.assign(Object.assign({},se.weights),r),h=this._index.get(e.term),f=this.termResults(e.term,e.term,1,e.termBoost,h,i,o,c);let g,m;if(e.prefix&&(g=this._index.atPrefix(e.term)),e.fuzzy){const p=e.fuzzy===!0?.2:e.fuzzy,_=p<1?Math.min(a,Math.round(e.term.length*p)):p;_&&(m=this._index.fuzzyGet(e.term,_))}if(g)for(const[p,_]of g){const w=p.length-e.term.length;if(!w)continue;m==null||m.delete(p);const x=u*p.length/(p.length+.3*w);this.termResults(e.term,p,x,e.termBoost,_,i,o,c,f)}if(m)for(const p of m.keys()){const[_,w]=m.get(p);if(!w)continue;const x=l*p.length/(p.length+w);this.termResults(e.term,p,x,e.termBoost,_,i,o,c,f)}return f}executeWildcardQuery(e){const t=new Map,s=Object.assign(Object.assign({},this._options.searchOptions),e);for(const[i,o]of this._documentIds){const r=s.boostDocument?s.boostDocument(o,"",this._storedFields.get(i)):1;t.set(i,{score:r,terms:[],match:{}})}return t}combineResults(e,t=ee){if(e.length===0)return new Map;const s=t.toLowerCase(),i=vt[s];if(!i)throw new Error(`Invalid combination operator: ${t}`);return e.reduce(i)||new Map}toJSON(){const e=[];for(const[t,s]of this._index){const i={};for(const[o,r]of s)i[o]=Object.fromEntries(r);e.push([t,i])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,t,s,i,o,r,a,c,l=new Map){if(o==null)return l;for(const u of Object.keys(r)){const h=r[u],f=this._fieldIds[u],g=o.get(f);if(g==null)continue;let m=g.size;const p=this._avgFieldLength[f];for(const _ of g.keys()){if(!this._documentIds.has(_)){this.removeTerm(f,_,t),m-=1;continue}const w=a?a(this._documentIds.get(_),t,this._storedFields.get(_)):1;if(!w)continue;const x=g.get(_),E=this._fieldLength.get(_)[f],D=wt(x,m,this._documentCount,E,p,c),O=s*i*h*w*D,T=l.get(_);if(T){T.score+=O,Tt(T.terms,e);const k=B(T.match,t);k?k.push(u):T.match[t]=[u]}else l.set(_,{score:O,terms:[e],match:{[t]:[u]}})}}return l}addTerm(e,t,s){const i=this._index.fetch(s,oe);let o=i.get(e);if(o==null)o=new Map,o.set(t,1),i.set(e,o);else{const r=o.get(t);o.set(t,(r||0)+1)}}removeTerm(e,t,s){if(!this._index.has(s)){this.warnDocumentChanged(t,e,s);return}const i=this._index.fetch(s,oe),o=i.get(e);o==null||o.get(t)==null?this.warnDocumentChanged(t,e,s):o.get(t)<=1?o.size<=1?i.delete(e):o.delete(t):o.set(t,o.get(t)-1),this._index.get(s).size===0&&this._index.delete(s)}warnDocumentChanged(e,t,s){for(const i of Object.keys(this._fieldIds))if(this._fieldIds[i]===t){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${s}" was not present in field "${i}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){const t=this._nextId;return this._idToShortId.set(e,t),this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t}addFields(e){for(let t=0;t<e.length;t++)this._fieldIds[e[t]]=t}addFieldLength(e,t,s,i){let o=this._fieldLength.get(e);o==null&&this._fieldLength.set(e,o=[]),o[t]=i;const a=(this._avgFieldLength[t]||0)*s+i;this._avgFieldLength[t]=a/(s+1)}removeFieldLength(e,t,s,i){if(s===1){this._avgFieldLength[t]=0;return}const o=this._avgFieldLength[t]*s-i;this._avgFieldLength[t]=o/(s-1)}saveStoredFields(e,t){const{storeFields:s,extractField:i}=this._options;if(s==null||s.length===0)return;let o=this._storedFields.get(e);o==null&&this._storedFields.set(e,o={});for(const r of s){const a=i(t,r);a!==void 0&&(o[r]=a)}}}I.wildcard=Symbol("*");const B=(n,e)=>Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0,vt={[ee]:(n,e)=>{for(const t of e.keys()){const s=n.get(t);if(s==null)n.set(t,e.get(t));else{const{score:i,terms:o,match:r}=e.get(t);s.score=s.score+i,s.match=Object.assign(s.match,r),ne(s.terms,o)}}return n},[ze]:(n,e)=>{const t=new Map;for(const s of e.keys()){const i=n.get(s);if(i==null)continue;const{score:o,terms:r,match:a}=e.get(s);ne(i.terms,r),t.set(s,{score:i.score+o,terms:i.terms,match:Object.assign(i.match,a)})}return t},[yt]:(n,e)=>{for(const t of e.keys())n.delete(t);return n}},xt={k:1.2,b:.7,d:.5},wt=(n,e,t,s,i,o)=>{const{k:r,b:a,d:c}=o;return Math.log(1+(t-e+.5)/(e+.5))*(c+n*(r+1)/(n+r*(1-a+a*s/i)))},jt=n=>(e,t,s)=>{const i=typeof n.fuzzy=="function"?n.fuzzy(e,t,s):n.fuzzy||!1,o=typeof n.prefix=="function"?n.prefix(e,t,s):n.prefix===!0,r=typeof n.boostTerm=="function"?n.boostTerm(e,t,s):1;return{term:e,fuzzy:i,prefix:o,termBoost:r}},G={idField:"id",extractField:(n,e)=>n[e],tokenize:n=>n.split(Ct),processTerm:n=>n.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(n,e)=>{typeof(console==null?void 0:console[n])=="function"&&console[n](e)},autoVacuum:!0},se={combineWith:ee,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:xt},St={combineWith:ze,prefix:(n,e,t)=>e===t.length-1},U={batchSize:1e3,batchWait:10},K={minDirtFactor:.1,minDirtCount:20},J=Object.assign(Object.assign({},U),K),Tt=(n,e)=>{n.includes(e)||n.push(e)},ne=(n,e)=>{for(const t of e)n.includes(t)||n.push(t)},ie=({score:n},{score:e})=>e-n,oe=()=>new Map,z=n=>{const e=new Map;for(const t of Object.keys(n))e.set(parseInt(t,10),n[t]);return e},N=n=>M(void 0,void 0,void 0,function*(){const e=new Map;let t=0;for(const s of Object.keys(n))e.set(parseInt(s,10),n[s]),++t%1e3===0&&(yield Ne(0));return e}),Ne=n=>new Promise(e=>setTimeout(e,n)),Ct=/[\n\r\p{Z}\p{P}]+/u;function It(n){const e=He(),{data:t}=Ue({clientName:ae.main,query:re(`query getStoresForStoreSelector($websiteId: ID) {
      stores (websiteId: $websiteId) {
        _id
        items {
          _id
          acceptDelivery
          acceptGo
          acceptServe
          name
          address {
            streetAddress
            extendedAddress
            locality
            subLocality
          }
        }
      }
    }`),variables:{websiteId:e},fetchPolicy:"cache-first"});return b.useMemo(()=>(t.stores.items||[]).filter(i=>{var o;return!(!((o=i.address)!=null&&o.streetAddress)||n==="go"&&!i.acceptGo||n==="serve"&&!i.acceptServe)}).sort((i,o)=>{const r=(i==null?void 0:i.name)||"",a=(o==null?void 0:o.name)||"";return r.localeCompare(a,"es",{sensitivity:"base"})}),[n,t])}function Fe(n){const e=v(l=>l.preferences),t=v(l=>l.setStore),s=It(n.deliveryType),i=v(l=>l.setChoosePlaceOpen),[o,r]=b.useState(""),a=(s==null?void 0:s.length)>4;b.useEffect(()=>{s.length===1&&e.storeId!==s[0]._id&&t(s[0])},[s.length,e.storeId,n.deliveryType]);const c=b.useMemo(()=>{if(!o||!a)return s;const l=new I({fields:["name","streetAddress","subLocality"],storeFields:["store"],searchOptions:{prefix:!0,fuzzy:.1,boost:{name:5}}});return l.addAll(s.map(h=>{var f,g;return{id:h._id,name:h.name,streetAddress:(f=h==null?void 0:h.address)==null?void 0:f.streetAddress,subLocality:(g=h==null?void 0:h.address)==null?void 0:g.subLocality,store:h}})),l.search(o).map(h=>h.store)},[o,s]);return d.jsxs(d.Fragment,{children:[a&&d.jsx("div",{className:"pb-2",children:d.jsx(ce,{placeholder:"Buscar local por nombre o dirección",value:o,onChange:r})}),d.jsx("div",{className:"max-h-[250px] overflow-auto scroll-smooth space-y-2",children:c.map(l=>d.jsx(j,{full:!0,variant:e.storeId===l._id?"default":"secondary",className:"text-left h-auto justify-start whitespace-normal",onClick:()=>{t(l),n.deliveryType==="go"&&q(200).then(()=>{i(!1)})},children:d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-bold",children:l.name}),d.jsx("div",{children:[l.address.streetAddress,l.address.extendedAddress,l.address.subLocality].filter(Boolean).join(", ")})]})},l._id))})]})}function ss(){return d.jsx("div",{children:d.jsx(Fe,{deliveryType:"go"})})}function ns(){const n=v(r=>r.preferences),e=v(r=>r.setTableName),[t,s]=b.useState(n.tableName),i=t!==n.tableName,{t:o}=A();return b.useEffect(()=>{n.tableName!==t&&s(t)},[n.tableName]),d.jsxs("div",{className:"space-y-5",children:[d.jsx(Fe,{deliveryType:"serve"}),d.jsxs("div",{className:"flex items-end space-x-2",children:[d.jsx(ce,{value:t,onChange:s,label:"Nombre de mesa"}),i&&d.jsx(j,{onClick:()=>e(t),children:o("light_lost_owl_kick")})]})]})}function is(){const n=v(o=>o.preferences),e=v(o=>o.setDeliveryType),t=Ye(),{t:s}=A(),i={delivery:s("just_candid_panther_pout"),go:s("each_stout_parakeet_zoom"),serve:s("main_real_alligator_bend")};return b.useEffect(()=>{n&&t.deliveryTypes.length===1&&n.deliveryType!==t.deliveryTypes[0]&&e(t.deliveryTypes[0])},[n==null?void 0:n.deliveryType]),t.deliveryTypes.length===1?t.deliveryTypes[0]==="delivery"?d.jsx(F,{children:s("each_stout_parakeet_talk")}):d.jsx(F,{children:s("weird_broad_platypus_trim")}):d.jsxs(d.Fragment,{children:[d.jsx(F,{children:s("weird_broad_platypus_trim")}),d.jsx(lt,{value:n==null?void 0:n.deliveryType,onValueChange:o=>e(o),children:d.jsx(je,{className:"w-full",children:Object.keys(i).filter(o=>t.deliveryTypes.includes(o)).map(o=>d.jsx(Se,{className:"flex-1",value:o,children:i[o]},o))})})]})}function os(){const n=ot(c=>c.cookies),[e,t]=b.useState(!1),[s,i]=b.useState(!1),[o,r]=b.useState(!1);if(!n.show)return null;const a=c=>{n.setPermissions(c),window.location.reload()};return e?d.jsxs("div",{className:"z-50 fixed bottom-5 right-5 bg-plain rounded-lg border shadow-lg left-5 md:left-auto md:w-[550px] p-5 space-y-3",children:[d.jsx(te,{size:"h3",children:"Política de Cookies"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx($,{label:"Necesarias",disabled:!0,value:!0}),d.jsx("div",{className:"text-muted-foreground",children:"Las cookies necesarias nos ayudan a hacer utilizable el Sitio Web, toda vez que nos permiten activar sus funciones básicas (como, por ejemplo, la navegación dentro del Sitio Web). El Sitio Web no puede funcionar adecuadamente sin estas cookies."})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx($,{label:"Estadísticas",value:s,onChange:i}),d.jsx("div",{className:"text-muted-foreground",children:"Las cookies estadísticas nos ayudan a comprender cómo interactúan los usuarios con el Sitio Web. Para ello, estas cookies recopilan, administran y procesan información anonimizada sobre las acciones de los usuarios en el Sitio Web."})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx($,{label:"De Marketing",value:o,onChange:r}),d.jsx("div",{className:"text-muted-foreground",children:"Las cookies de marketing se utilizan para analizar posibles intereses y/o necesidades de los usuarios del Sitio Web. Lo anterior, con el propósito de mostrarles anuncios publicitarios de conformidad con su perfil individual."})]})]}),d.jsx("div",{className:"text-right mt-3 space-x-3",children:d.jsx(j,{onClick:()=>a({analytics:s,marketing:o,necessary:!0}),children:"Aceptar"})})]}):d.jsxs("div",{className:"z-50 fixed bottom-5 right-5 bg-plain rounded-lg border shadow-lg left-5 md:left-auto md:w-[550px] p-5 space-y-3",children:[d.jsx(te,{size:"h3",children:"Política de Cookies"}),d.jsxs("p",{children:["Haga clic en Aceptar para permitir que Justo use cookies a fin de personalizar este sitio, publicar anuncios y medir su eficiencia en otras apps y sitios web, incluidas las redes sociales. Personalice sus preferencias en Configuración de cookies. Conozca más sobre nuestra"," ",d.jsx(rt,{className:"underline",to:"/documentos-legales/cookies",children:"Política de Cookies"}),"."]}),d.jsxs("div",{className:"text-right space-x-3",children:[d.jsx(j,{variant:"link",onClick:()=>t(!0),children:"Configuración de cookies"}),d.jsx(j,{onClick:()=>a({analytics:!0,marketing:!0,necessary:!0}),children:"Aceptar"})]})]})}export{ss as C,is as D,lt as T,os as W,ns as a,ts as b,je as c,Se as d};

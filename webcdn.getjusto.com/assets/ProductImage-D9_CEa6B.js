import{j as t}from"./jsx-runtime-BGxL3LVy.js";import{c as o}from"./utils-mMyIM9tf.js";import{B as w}from"./badge-DAjfRXK0.js";import{u as y}from"./useTranslation-B_PywvDf.js";import{I as P}from"./index-CohxQZEM.js";import{F as v}from"./index-DhFb9xq3.js";function j(n){const{availabilityAt:i}=n;if(!i)return null;const{finalPrice:e,basePrice:s,available:r,notAvailableMessage:l,hideDiscountBadge:a}=i;return r?e!==s?{type:"discount",price:e,oldPrice:s,hideDiscountBadge:a}:e?{type:"normal",price:e}:null:{type:"notAvailable",message:l}}function N(n){const{product:i,design:e}=n,s=j(i);return e!=null&&e.hideProductsDiscountBadge?null:t.jsx(t.Fragment,{children:(s==null?void 0:s.type)==="discount"&&!(s!=null&&s.hideDiscountBadge)&&t.jsxs("span",{className:o("absolute top-2 items-center rounded-3xl bg-primary px-1.5 py-0.5 text-sm font-bold text-primary-foreground",{"right-2":e.isHorizontallyReversed,"left-2":!e.isHorizontallyReversed}),children:["-",Math.round((1-s.price/s.oldPrice)*100),"%"]})})}function z(n){const{t:i}=y(),{isHorizontallyReversed:e}=n.design;return t.jsx(w,{variant:"secondary",className:o("absolute top-2 items-center rounded-3xl px-1.5 py-0.5 text-sm font-bold",{"right-2":e,"left-2":!e}),children:i("free_cozy_newt_ripple")})}function H(n){var a;const{t:i}=y(),{product:e,design:s}=n,r=s.isHorizontallyReversed,l=((a=e.availabilityAt)==null?void 0:a.notAvailableMessage)??i("best_ideal_weasel_scoop");return t.jsx("span",{className:o("absolute bottom-2.5 line-clamp-3 w-3/6 items-center rounded-3xl px-1.5 py-1.5 text-xs font-bold text-plain-foreground opacity-90",r?"left-2.5":"right-2.5","dark:bg-neutral-400 dark:text-neutral-900"),children:l})}function A(n){var e;const{product:i}=n;return i.isOutOfStock?t.jsx(z,{...n}):(e=i.availabilityAt)!=null&&e.available?t.jsx(N,{...n}):t.jsx(H,{...n})}function O(n){const{product:i,design:e}=n;if(e.shouldHidePrices)return null;const s=j(i),r=e.isCompact?"flex-col sm:flex-row":"flex-row";return s&&t.jsxs("div",{className:o("flex gap-x-2 text-sm",r,{"opacity-40":i.isOutOfStock}),children:[["normal","discount"].includes(s.type)&&t.jsx("div",{children:t.jsx(v,{number:s.price})}),s.type==="discount"&&t.jsx("div",{className:"text-muted-foreground line-through",children:t.jsx(v,{number:s.oldPrice})})]})}function I(n){var b;const{product:i,design:e}=n,{cardOrientation:s,isCompact:r}=e,{name:l,description:a,isOutOfStock:u,availabilityAt:d}=i,m=u||!(d!=null&&d.available),p=(b=i==null?void 0:i.informativeStamps)==null?void 0:b.slice(0,3),c=s==="horizontal",f=c?"h-40 w-[60%] sm:w-56":r?"h-[118px] w-full":"h-32 w-full",x=c?"p-3.5 pr-3":r?"p-3":"p-3.5",g=c||r?"line-clamp-2":"line-clamp-1",h=c?"line-clamp-3":"line-clamp-2";return t.jsxs("div",{className:o("flex flex-col justify-between",f,x),children:[t.jsxs("div",{className:o("overflow-hidden text-ellipsis break-words",{"opacity-40":m}),children:[t.jsxs("div",{className:"font-semibold text-base flex flex-row items-center cursor-pointer",children:[t.jsxs("span",{className:o(g,"orderProductName"),children:[" ",l]}),t.jsx("span",{className:"ml-1 flex-none",children:t.jsx(P,{stamps:p,iconOnly:!0})})]}),!r&&t.jsx("p",{className:o("mt-0.5 text-xs text-ellipsis dark:text-neutral-300 whitespace-pre-wrap",h),children:a})]}),t.jsx(O,{product:i,design:e})]})}function M(n){var f,x,g,h;const{product:i,design:e,forceHighRes:s}=n,{images:r,titleImg:l,altImg:a,name:u}=i,{isHorizontal:d,isVertical:m,isHorizontallyReversed:p}=e;if(!(r!=null&&r.length))return t.jsx("div",{});let c=(x=(f=r[0])==null?void 0:f.resizedData)==null?void 0:x.smallURL;return(e.cardType.includes("vertical-wide")||s)&&(c=(h=(g=r[0])==null?void 0:g.resizedData)==null?void 0:h.mediumURL),t.jsx("div",{className:o("relative",{"w-full h-40":m,"w-[40%] sm:w-40":d}),children:t.jsx("img",{src:c,alt:a||u,title:l||u,loading:"lazy",className:o("absolute inset-0 w-full h-full object-cover","antialiased",n.className,{"rounded-t-lg aspect-auto":m,"rounded-l-lg":d&&!p,"rounded-r-lg":p})})})}export{M as P,I as a,A as b};

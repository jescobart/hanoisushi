var v=Object.defineProperty;var w=(e,t,a)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var _=(e,t,a)=>w(e,typeof t!="symbol"?t+"":t,a);import{r as f,j as l,g as M,R as P}from"./jsx-runtime-BGxL3LVy.js";import{B as U}from"./button-B9Ixe4GG.js";import{P as k,a as B,b as L,C as D,c as G,d as F,e as W,f as V,g as X}from"./popover-LlYgTbu8.js";import{c as j}from"./utils-mMyIM9tf.js";import{I as g}from"./index-BFQuIHSE.js";import{n as $}from"./index-Dg1ijqza.js";import{c as R}from"./createLucideIcon-gj9TAl09.js";import{r as H,l as N}from"./index-Dpcw64aj.js";import{O as J}from"./index-BbH7TfgA.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=R("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=R("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),O=1,I=.9,Q=.8,Z=.3,E=.1,A=.999,q=.9999,z=.99,b=/[\\\/_+.#"@\[\(\{&]/,ee=/[\\\/_+.#"@\[\(\{&]/g,te=/[\s-]/,T=/[\s-]/g;function S(e,t,a,c,r,o,u){if(o===t.length)return r===e.length?O:z;const h=`${r},${o}`;if(u[h]!==void 0)return u[h];const m=c.charAt(o);let n=a.indexOf(m,r),i=0,s,p,d,C;for(;n>=0;)s=S(e,t,a,c,n+1,o+1,u),s>i&&(n===r?s*=O:b.test(e.charAt(n-1))?(s*=Q,d=e.slice(r,n-1).match(ee),d&&r>0&&(s*=A**d.length)):te.test(e.charAt(n-1))?(s*=I,C=e.slice(r,n-1).match(T),C&&r>0&&(s*=A**C.length)):(s*=Z,r>0&&(s*=A**(n-r))),e.charAt(n)!==t.charAt(o)&&(s*=q)),(s<E&&a.charAt(n-1)===c.charAt(o+1)||c.charAt(o+1)===c.charAt(o)&&a.charAt(n-1)!==c.charAt(o))&&(p=S(e,t,a,c,n+1,o+2,u),p*E>s&&(s=p*E)),s>i&&(i=s),n=a.indexOf(m,n+1);return u[h]=i,i}function x(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(T," ")}function y(e,t){return S(e,t,x(e),x(t),0,0,{})}function se(e,t,a){return e.map(c=>{const r=[];if(t.map(o=>{const u=c[o];if($(u))for(const h of u){const m=y(h,a);r.push(m)}else if(u){const h=y(u,a);r.push(h)}}),r.length>0){const o=Math.max(...r);return o<=0?null:{item:c,score:o}}return null}).filter(c=>c).sort((c,r)=>r.score-c.score).map(c=>c.item)}function Ce(e){const{options:t}=e,[a,c]=f.useState(!1),r=e.value?e.multi?e.value||[]:[e.value]:[],o=n=>{if(e.multi){const i=r.includes(n)?r.filter(s=>s!==n):[...r,n];e.onChange(i)}else e.onChange(n)},[u,h]=f.useState("");f.useEffect(()=>{!a&&u&&setTimeout(()=>{h("")},100)},[a]);const m=f.useMemo(()=>u?t?se(t,["label"],u):[]:t||[],[u,t]);return l.jsx(g,{...e,children:n=>{var i;return l.jsxs(k,{open:a,onOpenChange:c,children:[l.jsx(B,{asChild:!0,children:l.jsxs(U,{variant:"plain","aria-expanded":a,className:j("w-full justify-between bg-plain",n&&"border-destructive ring-1 ring-destructive"),children:[((i=t==null?void 0:t.filter(s=>r.includes(s.value)))==null?void 0:i.map(s=>s.label).join(", "))||e.placeholder||"Selecciona uno...",l.jsx(K,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),l.jsx(L,{align:"start",className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:l.jsxs(D,{shouldFilter:!1,children:[l.jsx(G,{value:u,onValueChange:h,placeholder:"Buscar una opciÃ³n..."}),l.jsxs(F,{children:[l.jsx(W,{children:"No se encontraron opciones"}),l.jsx(V,{children:m.map(s=>l.jsxs(X,{value:s.value,onSelect:()=>{o(s.value),c(!1)},children:[l.jsx(Y,{className:j("mr-2 h-4 w-4",r.includes(s.value)?"opacity-100":"opacity-0")}),s.label]},s.value))})]})]})})]})}})}var re=H();const ae=M(re);class ce extends N.ArrayComponent{getObjectField(){return J}removeItem(t){const a=this.props.value||[],c=ae(a,a[t]);this.props.onChange(c)}componentWillUnmount(){const{autoSave:t=!1}=this.props;t&&this.props.onChange(this.props.value)}renderRemoveButton(){return null}renderAddButton(){return null}renderChildrenItem({index:t,children:a}){const c=P.Children.map(a,r=>P.cloneElement(r,{index:t}));return l.jsxs("div",{className:"flex space-x-3 py-2",style:this.props.draggable?null:{cursor:"initial"},children:[this.props.showStyle?l.jsx("div",{className:"bg-muted w-2 rounded-full"}):null,l.jsx("div",{className:"space-y-2 flex-1",children:this.renderChildrenItemWithContext({index:t,children:c})})]},`${this.props.fieldName}.${t}`)}render(){return l.jsx(g,{...this.props,children:this.renderChildren()})}}_(ce,"defaultProps",{...N.ArrayComponent.defaultProps,childrenClassName:"os-s-array os-s-array-1",draggable:!1,showRemoveButton:!0,useAccordion:!1,accordionLabel:"",showStyle:!0});export{Ce as C,ce as S,Y as a,K as b};

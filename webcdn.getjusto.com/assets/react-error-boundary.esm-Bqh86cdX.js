import{r as i}from"./jsx-runtime-BGxL3LVy.js";const c=i.createContext(null),l={didCatch:!1,error:null};class m extends i.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=l}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var t,r,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];(t=(r=this.props).onReset)===null||t===void 0||t.call(r,{args:a,reason:"imperative-api"}),this.setState(l)}}componentDidCatch(e,t){var r,n;(r=(n=this.props).onError)===null||r===void 0||r.call(n,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:n}=this.props;if(r&&t.error!==null&&h(e.resetKeys,n)){var a,s;(a=(s=this.props).onReset)===null||a===void 0||a.call(s,{next:n,prev:e.resetKeys,reason:"keys"}),this.setState(l)}}render(){const{children:e,fallbackRender:t,FallbackComponent:r,fallback:n}=this.props,{didCatch:a,error:s}=this.state;let o=e;if(a){const u={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof t=="function")o=t(u);else if(r)o=i.createElement(r,u);else if(n!==void 0)o=n;else throw s}return i.createElement(c.Provider,{value:{didCatch:a,error:s,resetErrorBoundary:this.resetErrorBoundary}},o)}}function h(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return d.length!==e.length||d.some((t,r)=>!Object.is(t,e[r]))}export{m as E};

import{r as s}from"./jsx-runtime-BGxL3LVy.js";import{i as o,j as i}from"./env-D6s-xqZ4.js";import{m as d}from"./index-Dg1ijqza.js";import{i as m}from"./isEqual-iux_d1W7.js";const f=new Map;function w(a,e){const[t,n]=s.useState(null),c=t===null&&!(e!=null&&e.skip),r=`${d.webdata.urls[i]}${a}`;return s.useEffect(()=>{t&&n(null)},[r]),s.useEffect(()=>{if(o||e!=null&&e.skip||t)return;if(f.has(r)){n(f.get(r));return}const l=new AbortController;return fetch(`${r}`,{signal:l.signal}).then(u=>u.json()).then(u=>{u?(f.set(r,u.data),n(u.data)):n(null)}).catch(u=>{console.error(`Error fetching data from ${r}`,u),n(null)}),()=>{l.abort(new Error(`Request to ${r} was aborted because the component unmounted or the params changed`))}},[r,!!t,e==null?void 0:e.skip]),{data:t,loading:c}}function D(a,e){if(o)return[a,!1];const[t,n]=s.useState(a);s.useEffect(()=>{const r=setTimeout(()=>{s.startTransition(()=>{n(a)})},e);return()=>clearTimeout(r)},[a]);const c=!m(a,t);return[t,c]}export{w as a,D as u};

import{c as s,g as Rt}from"./jsx-runtime-BGxL3LVy.js";import{k as N,p as Lt,q as Ft,r as jt,n as Gt,j as C,s as Bt,m as Ut,h as Kt}from"./apollo-hooks.es-DZ97-Of4.js";import{f as m,z as yt,A as ht,i as Ot,b as vt,y as qt,B as Ht,e as xt,_ as Qt,C as Wt}from"./index-Dg1ijqza.js";import{f as Q,c as L,_ as Yt}from"./tslib.es6-B4nGuNfR.js";import{i as Jt}from"./identity-CwXImgea.js";var zt={},Ae={},W={},Zt=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(W,"__esModule",{value:!0});const Xt=Zt(N),er=e=>`Validation Error: {${Object.keys(e).map(n=>`${n}: ${e[n]}`).join(", ")}}`;class De extends Error{constructor(t){if(super(er(t)),this.getInfo=()=>({error:"validationError",message:"Validation Error",validationErrors:this.validationErrors}),this.prependKey=r=>{const n={},a=Object.keys(this.validationErrors);for(const i of a)n[`${r}.${i}`]=this.validationErrors[i];return new De(n)},!(0,Xt.default)(t))throw new Error("ValidationError must be initialized with an errors object");Error.captureStackTrace(this,this.constructor),this.code="validationError",this.isValidationError=!0,this.isOrionError=!0,this.validationErrors=t,this.getInfo}}W.default=De;var V={},F={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.convertTypedModel=D.isClass=void 0;function gt(e){const t=e.constructor&&e.constructor.toString().substring(0,5)==="class";if(e.prototype===void 0)return t;const r=e.prototype.constructor&&e.prototype.constructor.toString&&e.prototype.constructor.toString().substring(0,5)==="class";return t||r}D.isClass=gt;const Ze=(e,t)=>{if(!e[t])return;const r=e[t].type;r&&typeof r=="function"&&gt(r)&&(!r.getModel||!r.__schemaId||(e[t].type=r.getModel().getCleanSchema()))},tr=e=>{Ze(e,"schema"),Ze(e,"currentSchema")};D.convertTypedModel=tr;Object.defineProperty(F,"__esModule",{value:!0});F.getSchemaFromTypedModel=void 0;const rr=D,nr=e=>{const t=e;return typeof t!="function"||!(0,rr.isClass)(t)||!t.getModel||!t.__schemaId?t:t.getModel().getCleanSchema()};F.getSchemaFromTypedModel=nr;var Me={},Ne={},Y={},ar=Q,ir=m,sr=L,ur="[object String]";function or(e){return typeof e=="string"||!ir(e)&&sr(e)&&ar(e)==ur}var w=or,j={},me={},$={};Object.defineProperty($,"__esModule",{value:!0});function fr(e){const{name:t,validate:r,clean:n,...a}=e;return{...a,name:t,validate:(o,f={})=>(f.currentSchema||(f.currentSchema={}),r(o,f)),clean:(o,f={})=>(f.options||(f.options={}),n?n(o,f):o),_isFieldType:!0}}$.default=fr;var g={};Object.defineProperty(g,"__esModule",{value:!0});g.default={NOT_IN_SCHEMA:"notInSchema",REQUIRED:"required",UNKNOWN_FIELD_TYPE:"unknownFieldType",NOT_AN_ARRAY:"notAnArray",NOT_AN_OBJECT:"notAnObject",NOT_A_STRING:"notAString",NOT_A_DATE:"notADate",NOT_AN_INTEGER:"notAnInteger",NOT_A_NUMBER:"notANumber",NOT_AN_ID:"notAnId",STRING_TOO_SHORT:"stringTooShort",STRING_TOO_LONG:"stringTooLong",NUMBER_TOO_SMALL:"numberTooSmall",NUMBER_TOO_BIG:"numberTooBig",NOT_A_BOOLEAN:"notABoolean",NOT_AN_EMAIL:"notAnEmail",NOT_UNIQUE:"notUnique",NOT_AN_ALLOWED_VALUE:"notAnAllowedValue"};var we=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(me,"__esModule",{value:!0});const lr=we($),Xe=we(m),cr=we(g);me.default=(0,lr.default)({name:"array",validate(e){if(!(0,Xe.default)(e))return cr.default.NOT_AN_ARRAY},clean(e,{options:t}){return t.autoConvert&&((0,Xe.default)(e)||(e=[e])),e}});var Se={},le,et;function _r(){if(et)return le;et=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return le=t,le}var ce,tt;function dr(){if(tt)return ce;tt=1;function e(t){return this.__data__.has(t)}return ce=e,ce}var _e,rt;function pr(){if(rt)return _e;rt=1;var e=Lt,t=_r(),r=dr();function n(a){var i=-1,u=a==null?0:a.length;for(this.__data__=new e;++i<u;)this.add(a[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,_e=n,_e}function yr(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var hr=yr;function Or(e){return e!==e}var vr=Or;function gr(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var $r=gr,br=hr,Er=vr,Tr=$r;function Ar(e,t,r){return t===t?Tr(e,t,r):br(e,Er,r)}var $t=Ar,de,nt;function Dr(){if(nt)return de;nt=1;var e=$t;function t(r,n){var a=r==null?0:r.length;return!!a&&e(r,n,0)>-1}return de=t,de}var pe,at;function Mr(){if(at)return pe;at=1;function e(t,r,n){for(var a=-1,i=t==null?0:t.length;++a<i;)if(n(r,t[a]))return!0;return!1}return pe=e,pe}function Nr(e,t){return e.has(t)}var mr=Nr,ye,it;function wr(){if(it)return ye;it=1;var e=pr(),t=Dr(),r=Mr(),n=yt,a=ht,i=mr,u=200;function o(f,c,p,y){var E=-1,h=t,d=!0,O=f.length,_=[],b=c.length;if(!O)return _;p&&(c=n(c,a(p))),y?(h=r,d=!1):c.length>=u&&(h=i,d=!1,c=new e(c));e:for(;++E<O;){var v=f[E],M=p==null?v:p(v);if(v=y||v!==0?v:0,d&&M===M){for(var ze=b;ze--;)if(c[ze]===M)continue e;_.push(v)}else h(c,M,y)||_.push(v)}return _}return ye=o,ye}var Sr=Jt,Ir=Ft,Pr=jt;function Cr(e,t){return Pr(Ir(e,t,Sr),e+"")}var Vr=Cr,he,st;function kr(){if(st)return he;st=1;var e=Ot,t=L;function r(n){return t(n)&&e(n)}return he=r,he}var Rr=wr(),Lr=Gt,Fr=Vr,ut=kr(),jr=Fr(function(e,t){return ut(e)?Rr(e,Lr(t,1,ut,!0)):[]}),bt=jr,J=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Se,"__esModule",{value:!0});const Gr=J($),ot=J(N),Br=J(g),Ur=J(bt);Se.default=(0,Gr.default)({name:"plainObject",validate(e){if(!(0,ot.default)(e))return Br.default.NOT_AN_OBJECT},clean(e,{type:t,options:r}){if(!(0,ot.default)(e))return e;if(r.filter){const n=Object.keys(e),a=Object.keys(t),i=(0,Ur.default)(n,a);for(const u of i)delete e[u]}return e}});var Ie={},Kr=vt,qr=1/0,Hr=17976931348623157e292;function xr(e){if(!e)return e===0?e:0;if(e=Kr(e),e===qr||e===-1/0){var t=e<0?-1:1;return t*Hr}return e===e?e:0}var Qr=xr,Wr=Qr;function Yr(e){var t=Wr(e),r=t%1;return t===t?r?t-r:t:0}var Et=Yr,Jr=yt;function zr(e,t){return Jr(t,function(r){return e[r]})}var Zr=zr,Xr=Zr,en=qt;function tn(e){return e==null?[]:Xr(e,en(e))}var Tt=tn;const ys=Rt(Tt);var rn=$t,nn=Ot,an=w,sn=Et,un=Tt,on=Math.max;function fn(e,t,r,n){e=nn(e)?e:un(e),r=r&&!n?sn(r):0;var a=e.length;return r<0&&(r=on(a+r,0)),an(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&rn(e,t,r)>-1}var At=fn,G=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ie,"__esModule",{value:!0});const ln=G($),cn=G(w),k=G(g),_n=G(At),dn=G(m);Ie.default=(0,ln.default)({name:"string",validate(e,{currentSchema:t}){if(!(0,cn.default)(e))return k.default.NOT_A_STRING;if(isFinite(t.min)&&e.length<t.min)return k.default.STRING_TOO_SHORT;if(isFinite(t.max)&&e.length>t.max)return k.default.STRING_TOO_LONG;if((0,dn.default)(t.allowedValues)&&!(0,_n.default)(t.allowedValues,e))return k.default.NOT_AN_ALLOWED_VALUE;if(e===""&&!t.optional)return k.default.REQUIRED},clean(e,{options:{autoConvert:t,trimStrings:r,removeEmptyStrings:n}}){if(t&&(e=String(e)),r&&(e=e.trim()),!(n&&e===""))return e}});var Pe={},pn=Q,yn=L,hn="[object Date]";function On(e){return yn(e)&&pn(e)==hn}var vn=On,gn=vn,$n=ht,ft=Ht,lt=ft&&ft.isDate,bn=lt?$n(lt):gn,En=bn,Tn=Q,An=L,Dn="[object Number]";function Mn(e){return typeof e=="number"||An(e)&&Tn(e)==Dn}var Nn=Mn,B=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pe,"__esModule",{value:!0});const mn=B($),wn=B(En),Sn=B(g),In=B(w),Pn=B(Nn);Pe.default=(0,mn.default)({name:"date",validate(e){if(!(0,wn.default)(e))return Sn.default.NOT_A_DATE},clean(e,{options:t}){if(t.autoConvert){if((0,In.default)(e)){const r=new Date(e);if(isNaN(r.getTime()))return e;e=r}else if((0,Pn.default)(e)){const r=new Date(e);if(isNaN(r.getTime()))return e;e=r}}return e}});var Ce={},Cn=Et;function Vn(e){return typeof e=="number"&&e==Cn(e)}var Dt=Vn,z={},kn=Yt,Rn=kn.isFinite;function Ln(e){return typeof e=="number"&&Rn(e)}var Fn=Ln,Z=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z,"__esModule",{value:!0});const jn=Z($),Oe=Z(Fn),ve=Z(g),Gn=Z(vt);z.default=(0,jn.default)({name:"number",validate(e,{currentSchema:t}){if(!(0,Oe.default)(e))return ve.default.NOT_A_NUMBER;if((0,Oe.default)(t.min)&&e<t.min)return ve.default.NUMBER_TOO_SMALL;if((0,Oe.default)(t.max)&&e>t.max)return ve.default.NUMBER_TOO_BIG},clean(e,{options:{autoConvert:t}}){return typeof e=="string"&&t&&(e=(0,Gn.default)(e)),e}});var X=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ce,"__esModule",{value:!0});const Bn=X($),Un=X(Dt),Kn=X(g),qn=X(z);Ce.default=(0,Bn.default)({name:"integer",validate(e,t){return(0,Un.default)(e)?qn.default.validate(e,t):Kn.default.NOT_AN_INTEGER}});var Ve={},ee=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ve,"__esModule",{value:!0});const Hn=ee($),ct=ee(w),_t=ee(Dt),xn=ee(g);Ve.default=(0,Hn.default)({name:"ID",validate(e){if(!(0,ct.default)(e)&&!(0,_t.default)(e))return xn.default.NOT_AN_ID},clean(e,{options:t}){if(!(0,ct.default)(e)&&!(0,_t.default)(e))return e;const{trimStrings:r,removeEmptyStrings:n}=t;if(e=String(e),r&&(e=e.trim()),!(n&&e===""))return e}});var ke={},Qn=Q,Wn=L,Yn="[object Boolean]";function Jn(e){return e===!0||e===!1||Wn(e)&&Qn(e)==Yn}var zn=Jn,Re=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ke,"__esModule",{value:!0});const Zn=Re($),Xn=Re(zn),ea=Re(g);ke.default=(0,Zn.default)({name:"boolean",validate(e){if(!(0,Xn.default)(e))return ea.default.NOT_A_BOOLEAN},clean(e,{options:t}){return t.autoConvert&&(typeof e=="string"&&(e==="true"&&(e=!0),e==="false"&&(e=!1)),typeof e=="number"&&(e===0?e=!1:e=!0)),e}});var Le={},te=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Le,"__esModule",{value:!0});const ta=te($),ra=te(w),ge=te(g),na=te(C);Le.default=(0,ta.default)({name:"email",validate(e,{currentSchema:t}){if((e===""||(0,na.default)(e))&&!t.optional)return ge.default.REQUIRED;if(e&&!(0,ra.default)(e))return ge.default.NOT_A_STRING;if(e&&!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e))return ge.default.NOT_AN_EMAIL},clean(e){return typeof e=="string"&&(e=e.toLowerCase()),e}});var Fe={},je=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fe,"__esModule",{value:!0});const aa=je($),ia=je(N),sa=je(g);Fe.default=(0,aa.default)({name:"blackbox",validate(e){if(!(0,ia.default)(e))return sa.default.NOT_AN_OBJECT}});var Ge={},ua=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ge,"__esModule",{value:!0});const oa=ua($);Ge.default=(0,oa.default)({name:"any",validate(e){}});var T=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(j,"__esModule",{value:!0});const fa=T(me),la=T(Se),ca=T(Ie),_a=T(Pe),da=T(Ce),pa=T(z),ya=T(Ve),ha=T(ke),Oa=T(Le),va=T(Fe),ga=T(Ge);j.default={array:fa.default,plainObject:la.default,string:ca.default,date:_a.default,integer:da.default,number:pa.default,ID:ya.default,boolean:ha.default,email:Oa.default,blackbox:va.default,any:ga.default};var $a=Object.prototype,ba=$a.hasOwnProperty;function Ea(e,t){return e!=null&&ba.call(e,t)}var Ta=Ea,Aa=Bt,Da=xt,Ma=m,Na=Qt,ma=Wt,wa=Ut;function Sa(e,t,r){t=Aa(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var u=wa(t[n]);if(!(i=e!=null&&r(e,u)))break;e=e[u]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&ma(a)&&Na(u,a)&&(Ma(e)||Da(e)))}var Ia=Sa,Pa=Ta,Ca=Ia;function Va(e,t){return e!=null&&Ca(e,t,Pa)}var ka=Va,U=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Y,"__esModule",{value:!0});const Ra=U(N),La=U(m),Fa=U(w),ja=U(j),Ga=U(ka);function Ba(e){if((0,Ra.default)(e))return e._isFieldType?"custom":"plainObject";if((0,La.default)(e))return"array";if(e===String)return"string";if(e===Date)return"date";if(e===Number)return"number";if(e===Boolean)return"boolean";if(e==="enum")return"string";if(!(0,Fa.default)(e))throw new Error("Field type is invalid. Pass a string or a custom field type. Got "+e);if(!(0,Ga.default)(ja.default,e))throw new Error("Field type does not exist");return e}Y.default=Ba;var re=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ne,"__esModule",{value:!0});const Ua=re(C),Ka=re(Y),qa=re(j),Ha=re(g);async function xa(e){const{schema:t,doc:r,currentDoc:n,value:a,currentSchema:i,keys:u,options:o={},args:f=[]}=e,c={schema:t,doc:r,currentDoc:n,keys:u,currentSchema:i,options:o};if((0,Ua.default)(a)){if(!i.optional&&!o.omitRequired)return Ha.default.REQUIRED}else{const y=(0,Ka.default)(i.type),h=await(y==="custom"?i.type:qa.default[y]).validate(a,c,...f);if(h)return h}if(i.custom&&(i.validate=i.custom),i.validate){const y=await i.validate(a,c,...f);if(y)return y}const p=i.type;if(p.__validate){const y=await p.__validate(a,c,...f);if(y)return y}return null}Ne.default=xa;var Qa=Kt,Wa=4;function Ya(e){return Qa(e,Wa)}var Ja=Ya,S=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Me,"__esModule",{value:!0});const za=S(Ne),Za=S(N),Xa=S(m),$e=S(Ja),ei=S(C),ti=S(bt),ri=S(g),ni=D;async function Te(e){(0,ni.convertTypedModel)(e);const{schema:t,doc:r,currentDoc:n,value:a,currentSchema:i,keys:u=[],addError:o,options:f,args:c}=e,p={schema:t,doc:r,currentDoc:n,value:a,currentSchema:i,keys:u,options:f,args:c,addError:o},y=await(0,za.default)(p);if(y){o(u,y);return}if(!(0,ei.default)(a)){if((0,Za.default)(i.type)){const E=i.type;if(E&&(E._isFieldType||typeof E.__skipChildValidation=="function"&&await E.__skipChildValidation(a,p)))return;const h=Object.keys(i.type).filter(_=>!_.startsWith("__"));for(const _ of h){const b=i.type[_],v=a[_],M=(0,$e.default)(u);M.push(_),await Te({...p,currentDoc:a,value:v,currentSchema:b,keys:M})}const d=Object.keys(a),O=(0,ti.default)(d,h);for(const _ of O){const b=(0,$e.default)(u);b.push(_),o(b,ri.default.NOT_IN_SCHEMA)}}else if((0,Xa.default)(i.type)){const E=i.type[0];for(let h=0;h<a.length;h++){const d=a[h],O=(0,$e.default)(u);O.push(h.toString()),await Te({...p,currentDoc:a,value:d,currentSchema:{type:E},keys:O})}}}}Me.default=Te;var Be={};function I(e,t){var r,n;if(typeof t=="function")n=t(e),n!==void 0&&(e=n);else if(Array.isArray(t))for(r=0;r<t.length;r++)n=t[r](e),n!==void 0&&(e=n);return e}function ai(e,t){return e[0]==="-"&&Array.isArray(t)&&/^-\d+$/.test(e)?t.length+parseInt(e,10):e}function ii(e){return/^\d+$/.test(e)}function H(e){return Object.prototype.toString.call(e)==="[object Object]"}function R(e){return Object(e)===e}function x(e){return Object.keys(e).length===0}var si=["__proto__","prototype","constructor"],ui=function(e){return si.indexOf(e)===-1};function ne(e,t){e.indexOf("[")>=0&&(e=e.replace(/\[/g,t).replace(/]/g,""));var r=e.split(t),n=r.filter(ui);if(n.length!==r.length)throw Error("Refusing to update blacklisted property "+e);return r}var dt=Object.prototype.hasOwnProperty;function l(e,t,r,n){if(!(this instanceof l))return new l(e,t,r,n);typeof t>"u"&&(t=!1),typeof r>"u"&&(r=!0),typeof n>"u"&&(n=!0),this.separator=e||".",this.override=t,this.useArray=r,this.useBrackets=n,this.keepArray=!1,this.cleanup=[]}var P=new l(".",!1,!0,!0);function A(e){return function(){return P[e].apply(P,arguments)}}l.prototype._fill=function(e,t,r,n){var a=e.shift();if(e.length>0){if(t[a]=t[a]||(this.useArray&&ii(e[0])?[]:{}),!R(t[a]))if(this.override)t[a]={};else{if(!(R(r)&&x(r)))throw new Error("Trying to redefine `"+a+"` which is a "+typeof t[a]);return}this._fill(e,t[a],r,n)}else{if(!this.override&&R(t[a])&&!x(t[a])){if(!(R(r)&&x(r)))throw new Error("Trying to redefine non-empty obj['"+a+"']");return}t[a]=I(r,n)}};l.prototype.object=function(e,t){var r=this;return Object.keys(e).forEach(function(n){var a=t===void 0?null:t[n],i=ne(n,r.separator).join(r.separator);i.indexOf(r.separator)!==-1?(r._fill(i.split(r.separator),e,e[n],a),delete e[n]):e[n]=I(e[n],a)}),e};l.prototype.str=function(e,t,r,n){var a=ne(e,this.separator).join(this.separator);return e.indexOf(this.separator)!==-1?this._fill(a.split(this.separator),r,t,n):r[e]=I(t,n),r};l.prototype.pick=function(e,t,r,n){var a,i,u,o,f;for(i=ne(e,this.separator),a=0;a<i.length;a++)if(o=ai(i[a],t),t&&typeof t=="object"&&o in t){if(a===i.length-1)return r?(u=t[o],n&&Array.isArray(t)?t.splice(o,1):delete t[o],Array.isArray(t)&&(f=i.slice(0,-1).join("."),this.cleanup.indexOf(f)===-1&&this.cleanup.push(f)),u):t[o];t=t[o]}else return;return r&&Array.isArray(t)&&(t=t.filter(function(c){return c!==void 0})),t};l.prototype.delete=function(e,t){return this.remove(e,t,!0)};l.prototype.remove=function(e,t,r){var n;if(this.cleanup=[],Array.isArray(e)){for(n=0;n<e.length;n++)this.pick(e[n],t,!0,r);return r||this._cleanup(t),t}else return this.pick(e,t,!0,r)};l.prototype._cleanup=function(e){var t,r,n,a;if(this.cleanup.length){for(r=0;r<this.cleanup.length;r++)n=this.cleanup[r].split("."),a=n.splice(0,-1).join("."),t=a?this.pick(a,e):e,t=t[n[0]].filter(function(i){return i!==void 0}),this.set(this.cleanup[r],t,e);this.cleanup=[]}};l.prototype.del=l.prototype.remove;l.prototype.move=function(e,t,r,n,a){return typeof n=="function"||Array.isArray(n)?this.set(t,I(this.pick(e,r,!0),n),r,a):(a=n,this.set(t,this.pick(e,r,!0),r,a)),r};l.prototype.transfer=function(e,t,r,n,a,i){return typeof a=="function"||Array.isArray(a)?this.set(t,I(this.pick(e,r,!0),a),n,i):(i=a,this.set(t,this.pick(e,r,!0),n,i)),n};l.prototype.copy=function(e,t,r,n,a,i){return typeof a=="function"||Array.isArray(a)?this.set(t,I(JSON.parse(JSON.stringify(this.pick(e,r,!1))),a),n,i):(i=a,this.set(t,this.pick(e,r,!1),n,i)),n};l.prototype.set=function(e,t,r,n){var a,i,u,o;if(typeof t>"u")return r;for(u=ne(e,this.separator),a=0;a<u.length;a++){if(o=u[a],a===u.length-1)if(n&&H(t)&&H(r[o]))for(i in t)dt.call(t,i)&&(r[o][i]=t[i]);else if(n&&Array.isArray(r[o])&&Array.isArray(t))for(var f=0;f<t.length;f++)r[u[a]].push(t[f]);else r[o]=t;else(!dt.call(r,o)||!H(r[o])&&!Array.isArray(r[o]))&&(/^\d+$/.test(u[a+1])?r[o]=[]:r[o]={});r=r[o]}return r};l.prototype.transform=function(e,t,r){return t=t||{},r=r||{},Object.keys(e).forEach((function(n){this.set(e[n],this.pick(n,t),r)}).bind(this)),r};l.prototype.dot=function(e,t,r){t=t||{},r=r||[];var n=Array.isArray(e);return Object.keys(e).forEach((function(a){var i=n&&this.useBrackets?"["+a+"]":a;if(R(e[a])&&(H(e[a])&&!x(e[a])||Array.isArray(e[a])&&!this.keepArray&&e[a].length!==0))if(n&&this.useBrackets){var u=r[r.length-1]||"";return this.dot(e[a],t,r.slice(0,-1).concat(u+i))}else return this.dot(e[a],t,r.concat(i));else n&&this.useBrackets?t[r.join(this.separator).concat("["+a+"]")]=e[a]:t[r.concat(i).join(this.separator)]=e[a]}).bind(this)),t};l.pick=A("pick");l.move=A("move");l.transfer=A("transfer");l.transform=A("transform");l.copy=A("copy");l.object=A("object");l.str=A("str");l.set=A("set");l.delete=A("delete");l.del=l.remove=A("remove");l.dot=A("dot");["override","overwrite"].forEach(function(e){Object.defineProperty(l,e,{get:function(){return P.override},set:function(t){P.override=!!t}})});["useArray","keepArray","useBrackets"].forEach(function(e){Object.defineProperty(l,e,{get:function(){return P[e]},set:function(t){P[e]=t}})});l._process=I;var oi=l,fi=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Be,"__esModule",{value:!0});const li=fi(oi),ci=new li.default(".",!1,!0,!1);function _i(e){if(e.length===0)return null;const t={};for(const r of e)t[r.key]=r.code;return ci.dot(t)}Be.default=_i;var Mt=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(V,"__esModule",{value:!0});const di=F,pi=Mt(Me),yi=Mt(Be),hi={omitRequired:!1};async function Oi(e,t,r={},...n){e=(0,di.getSchemaFromTypedModel)(e);const a={...hi,...r},i=[],u=function(o,f){i.push({key:o.join("."),code:f})};return await(0,pi.default)({schema:e,doc:t,currentDoc:t,value:t,currentSchema:{type:e},addError:u,options:a,args:n}),(0,yi.default)(i)}V.default=Oi;var Nt=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ae,"__esModule",{value:!0});const vi=Nt(W),gi=Nt(V);async function $i(e,t,r={},...n){const a=await(0,gi.default)(e,t,r,...n);if(a)throw new vi.default(a)}Ae.default=$i;var Ue={},bi=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ue,"__esModule",{value:!0});const Ei=bi(V);async function Ti(e,t,r={},...n){return!await(0,Ei.default)(e,t,r,...n)}Ue.default=Ti;var ae={},mt=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ae,"__esModule",{value:!0});const Ai=mt(Y),Di=mt(j);function Mi(e){const t=(0,Ai.default)(e);return t==="custom"?e:Di.default[t]}ae.default=Mi;var ie={},Ke={};function Ni(e){return e===void 0}var mi=Ni,qe={},se={},wi=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(se,"__esModule",{value:!0});const pt=wi(N);function Si(e,t){return(0,pt.default)(e.type)&&(0,pt.default)(t)?e:null}se.default=Si;var He=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qe,"__esModule",{value:!0});const Ii=He(ae),q=He(C),Pi=He(se);async function Ci(e,t,r,n,...a){if(n.type=t.type,!n.type)throw new Error("Cleaning field with no type");const{clean:i}=await(0,Ii.default)(e);i&&!(0,q.default)(r)&&(r=await i(r,n,...a));let u=!1;const o=(0,Pi.default)(t,r);o&&o.type.__clean&&(u=!0,r=await o.type.__clean(r,n,...a));const{defaultValue:f}=t;(0,q.default)(r)&&!(0,q.default)(f)&&(u=!0,typeof f=="function"?r=await f(n,...a):r=f);const{autoValue:c}=t;c&&(u=!0,r=await c(r,n,...a));const{clean:p}=t;return p&&(u=!0,r=await p(r,n,...a)),u&&i&&!(0,q.default)(r)&&(r=await i(r,n,...a)),r}qe.default=Ci;var K=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ke,"__esModule",{value:!0});const wt=K(mi),St=K(m),be=K(qe),Vi=K(C),ki=K(se),Ri=D,Li=async function({schema:e,value:t,...r}){const n=Object.keys(e.type).filter(i=>!i.startsWith("__")),a={};for(const i of n)try{const u={...r,schema:e.type[i],value:t[i],currentDoc:t},o=await xe(u);(0,wt.default)(o)||(a[i]=o)}catch(u){throw new Error(`Error cleaning field ${i}, error: ${u.message}`)}return a},Fi=async function({schema:e,value:t,...r}){const n=e.type[0],a=t.map(async(u,o)=>await xe({...r,schema:{type:n},value:u,currentDoc:t}));return(await Promise.all(a)).filter(u=>!(0,wt.default)(u))};function ji(e,t){return(0,St.default)(e.type)&&!(0,Vi.default)(t)?e:null}const xe=async function(e){(0,Ri.convertTypedModel)(e);let{schema:t,args:r=[],value:n}=e;const a=t.type===void 0?{type:t}:t,i=(0,ki.default)(a,n);if(i){const f=await Li({...e,schema:i,value:n});return await(0,be.default)("plainObject",i,f,e,...r)}const u=ji(a,n);if(u){let f=n;!(0,St.default)(n)&&!Array.isArray(n)&&(f=[n]);const c=await Fi({...e,schema:u,value:f});return await(0,be.default)("array",u,c,e,...r)}return await(0,be.default)(a.type,a,n,e,...r)};Ke.default=xe;var Gi=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ie,"__esModule",{value:!0});const Bi=F,Ui=Gi(Ke),Ki={autoConvert:!0,filter:!0,trimStrings:!0,removeEmptyStrings:!1};async function qi(e,t,r={},...n){if(!t)return t;e=(0,Bi.getSchemaFromTypedModel)(e);const a={...Ki,...r},i={schema:{type:e},value:t,doc:a.forceDoc||t,currentDoc:t,options:a,args:n};return await(0,Ui.default)(i)}ie.default=qi;var Qe={},ue={},oe={},It=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oe,"__esModule",{value:!0});const Hi=It(N),xi=It(C),Qi=function e(t,r){if(r==="")return t;const n=r.split("."),a=n.shift(),i=n.join("."),u=t.type;return a==="$"||/^[0-9]+$/.test(a)?e({type:u[0]},i):(0,Hi.default)(u[a])?e(u[a],i):u==="blackbox"?{type:"blackbox",optional:!0,isBlackboxChild:!0}:null};function Wi(e,t){if((0,xi.default)(e))throw new Error("You need to pass a schema");return Qi({type:e},t)}oe.default=Wi;var Yi=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ue,"__esModule",{value:!0});const Ji=Yi(oe);ue.default=Ji.default;var Pt=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qe,"__esModule",{value:!0});const zi=Pt(ie),Zi=Pt(ue),Xi={filter:!0};async function es(e,t,r,n={},...a){const i={...Xi,...n},u=(0,Zi.default)(e,t);return u?(await(0,zi.default)({clean:u},{clean:r},i,...a)).clean:i.filter?void 0:r}Qe.default=es;var We={},Ye=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(We,"__esModule",{value:!0});const ts=Ye(oe),rs=Ye(V),ns=Ye(g),as={filter:!1};async function is(e,t,r,n={},...a){const i={...as,...n},u=(0,ts.default)(e,t);if(!u)return i.filter?ns.default.NOT_IN_SCHEMA:null;if(u.isBlackboxChild)return null;const o=await(0,rs.default)({validate:u},{validate:r},i,...a);return o?o.validate:null}We.default=is;var Je={},fe=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Je,"__esModule",{value:!0});const ss=fe($),us=fe(w),Ee=fe(g),os=fe(At);function fs(e,t){return{type:t[0],...(0,ss.default)({name:"enum",meta:{enumName:e,enumValues:t},toGraphQLType:r=>(s.GraphQLEnums=s.GraphQLEnums||{},s.GraphQLEnums[e]=s.GraphQLEnums[e]||new r.GraphQLEnumType({name:e,values:t.reduce((n,a)=>(n[a]={value:a},n),{})}),s.GraphQLEnums[e]),validate(r,{currentSchema:n}){if(!(0,us.default)(r))return Ee.default.NOT_A_STRING;if(!(0,os.default)(t,r))return Ee.default.NOT_AN_ALLOWED_VALUE;if(r===""&&!n.optional)return Ee.default.REQUIRED},clean(r,{options:{autoConvert:n,trimStrings:a,removeEmptyStrings:i}}){if(n&&(r=String(r)),a&&(r=r.trim()),!(i&&r===""))return r}})}}Je.default=fs;var Ct={},Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});var kt={};Object.defineProperty(kt,"__esModule",{value:!0});(function(e){var t=s&&s.__createBinding||(Object.create?function(n,a,i,u){u===void 0&&(u=i);var o=Object.getOwnPropertyDescriptor(a,i);(!o||("get"in o?!a.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(n,u,o)}:function(n,a,i,u){u===void 0&&(u=i),n[u]=a[i]}),r=s&&s.__exportStar||function(n,a){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(a,i)&&t(a,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Vt,e),r(kt,e)})(Ct);(function(e){var t=s&&s.__createBinding||(Object.create?function(d,O,_,b){b===void 0&&(b=_);var v=Object.getOwnPropertyDescriptor(O,_);(!v||("get"in v?!O.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return O[_]}}),Object.defineProperty(d,b,v)}:function(d,O,_,b){b===void 0&&(b=_),d[b]=O[_]}),r=s&&s.__exportStar||function(d,O){for(var _ in d)_!=="default"&&!Object.prototype.hasOwnProperty.call(O,_)&&t(O,d,_)},n=s&&s.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.createEnum=e.validateKey=e.dotGetSchema=e.cleanKey=e.clean=e.getFieldType=e.isValid=e.getValidationErrors=e.ValidationError=e.validate=void 0;const a=n(Ae);e.validate=a.default;const i=n(W);e.ValidationError=i.default;const u=n(V);e.getValidationErrors=u.default;const o=n(Ue);e.isValid=o.default;const f=n(ae);e.getFieldType=f.default;const c=n(ie);e.clean=c.default;const p=n(Qe);e.cleanKey=p.default;const y=n(We);e.validateKey=y.default;const E=n(ue);e.dotGetSchema=E.default;const h=n(Je);e.createEnum=h.default,r(Ct,e),r($,e)})(zt);export{mr as _,Qr as a,wr as b,Vr as c,kr as d,Ia as e,zt as l,pr as r,Et as t,ys as v};

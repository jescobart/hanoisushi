import{r as he,g as T,a as Je,c as B}from"./jsx-runtime-BGxL3LVy.js";import{_ as ge,i as ve,t as Ze,b as Ke,f as G,c as J,g as qe}from"./tslib.es6-B4nGuNfR.js";import{j as k,a as Ve,i as M}from"./env-D6s-xqZ4.js";import{c as Xe,u as Ye}from"./useWebsite-B2NA3eOh.js";function Qe({webview:e,website:r}){var t,o,s;return e==="yapeApp"||e==="yapeAppStaging"?{showLogout:!1,showMyAccount:!1,showLoginButton:!1,hideEmailAddress:!0,defaultPaymentMethod:"yapeAppPE::",showSearchBarActiveByDefault:!1,shouldPromptForCookies:!1,loggedOutCartContinueButtonMode:"yape",loginWithExternalProvider:"yape",customCreateOrderButtonLabel:"Yapear",showOrderComponentsInNavbar:(t=r==null?void 0:r.navbarConfiguration)==null?void 0:t.showOrderComponentsInNavbar,showHelpLinksInNavbar:!1,activateAutoLogin:e==="yapeAppStaging",...e==="yapeAppStaging"?{orderSource:"embedded"}:null}:e==="daleCoApp"||e==="daleCoAppStaging"?{showLogout:!1,showMyAccount:!1,showLoginButton:!1,hideEmailAddress:!0,hideDynamicPages:!0,hideFooter:!0,simplifiedStyles:!0,customOrderNavbar:"embeddedApp",customCheckoutNavbar:"embeddedApp",addExtraPaymentMethod:{paymentMethodKey:"deunaDaleCO",label:"Tarjeta Dale!"},disableSSR:!1,shouldPromptForCookies:!1,loggedOutCartContinueButtonMode:"daleCo",loginWithExternalProvider:"daleCo",showOrderComponentsInNavbar:!1,showHelpLinksInNavbar:!1,customCSS:"daleCoApp",orderSource:"embedded",showMessageSupport:!0,sendEventMessageSupport:!0,whatsAppSupportNumber:"15863016412",hideDownloadAppBar:!0,hideMessageBar:!0,activateAutoLogin:!0}:e==="nequiCoApp"?{showLogout:!0,showMyAccount:!0,showLoginButton:!0,customLogin:"pide",hideEmailAddress:!1,hideNavbar:!1,hideFooter:!0,hideDynamicPages:!0,simplifiedStyles:!0,shouldPromptForCookies:!1,showOrderComponentsInNavbar:!0,showHelpLinksInNavbar:!1,disableSSR:!1,orderSource:"embedded",showMessageSupport:!0,whatsAppSupportNumber:"12692956448"}:e==="nequiCoWeb"?{showLogout:!0,showMyAccount:!0,showLoginButton:!0,hideEmailAddress:!1,hideNavbar:!1,hideFooter:!0,hideDynamicPages:!0,simplifiedStyles:!0,shouldPromptForCookies:!1,showOrderComponentsInNavbar:!0,showHelpLinksInNavbar:!1,disableSSR:!1,orderSource:"embedded",showMessageSupport:!0,whatsAppSupportNumber:"12692956448"}:e==="claroCoApp"||e==="claroCoAppStaging"?{showLogout:!1,showMyAccount:!1,showLoginButton:!1,hideEmailAddress:!0,hideFooter:!0,hideDynamicPages:!0,simplifiedStyles:!0,shouldPromptForCookies:!1,showOrderComponentsInNavbar:!0,showHelpLinksInNavbar:!1,disableSSR:!1,orderSource:"embedded",hideDownloadAppBar:!0,hideMessageBar:!0,showMessageSupport:!0,whatsAppSupportNumber:"15178377011"}:e==="justoApp"?{showLogout:!1,showMyAccount:!1,showLoginButton:!1,hideEmailAddress:!1,hideNavbar:!1,hideFooter:!0,hideDynamicPages:!0,simplifiedStyles:!0,shouldPromptForCookies:!1,customOrderNavbar:"justoApp",customCheckoutNavbar:"justoApp",customCSS:"justoApp",disableSSR:!1,showHelpLinksInNavbar:!1,showOrderComponentsInNavbar:!1,orderSource:"justoApp"}:e==="pide"?{showLogout:!0,showMyAccount:!0,showLoginButton:!0,customLogin:"pide",hideEmailAddress:!1,hideNavbar:!1,hideFooter:!0,hideDynamicPages:!0,simplifiedStyles:!0,shouldPromptForCookies:!1,showOrderComponentsInNavbar:!0,customOrderNavbar:"pide",customCheckoutNavbar:"pide",customCSS:"justoApp",showHelpLinksInNavbar:!1,disableSSR:!1,orderSource:"pide",showMessageSupport:!0}:e==="appEmbedded"?{showLogout:!1,showMyAccount:!1,showLoginButton:!1,hideEmailAddress:!1,hideNavbar:!0,hideFooter:!0,hideDynamicPages:!0,simplifiedStyles:!1,shouldPromptForCookies:!1,showOrderComponentsInNavbar:!0,showHelpLinksInNavbar:!1,disableSSR:!1,orderSource:"app",showMessageSupport:!1,customCheckoutNavbar:"clientApp"}:{showLoginButton:!0,showLogout:!0,showMyAccount:!0,hideEmailAddress:!1,showOrderComponentsInNavbar:(o=r==null?void 0:r.navbarConfiguration)==null?void 0:o.showOrderComponentsInNavbar,showHelpLinksInNavbar:(s=r==null?void 0:r.navbarConfiguration)==null?void 0:s.showHelpLinksInNavbar,shouldPromptForCookies:(r==null?void 0:r.countryCode)==="PE"||k==="local"}}function er(){const e=Xe(),r=Ye();return he.useMemo(()=>Qe({webview:e,website:r}),[e])}function rr(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var P=rr,tr=ge,or=function(){return tr.Date.now()},sr=or,ar=/\s/;function nr(e){for(var r=e.length;r--&&ar.test(e.charAt(r)););return r}var ur=nr,ir=ur,cr=/^\s+/;function dr(e){return e&&e.slice(0,ir(e)+1).replace(cr,"")}var lr=dr,fr=lr,Q=P,pr=ve,ee=NaN,hr=/^[-+]0x[0-9a-f]+$/i,gr=/^0b[01]+$/i,vr=/^0o[0-7]+$/i,mr=parseInt;function br(e){if(typeof e=="number")return e;if(pr(e))return ee;if(Q(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Q(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=fr(e);var t=gr.test(e);return t||vr.test(e)?mr(e.slice(2),t?2:8):hr.test(e)?ee:+e}var yr=br,Ar=P,W=sr,re=yr,xr="Expected a function",jr=Math.max,Sr=Math.min;function $r(e,r,t){var o,s,a,f,c,u,l=0,E=!1,S=!1,y=!0;if(typeof e!="function")throw new TypeError(xr);r=re(r)||0,Ar(t)&&(E=!!t.leading,S="maxWait"in t,a=S?jr(re(t.maxWait)||0,r):a,y="trailing"in t?!!t.trailing:y);function $(d){var x=o,L=s;return o=s=void 0,l=d,f=e.apply(L,x),f}function n(d){return l=d,c=setTimeout(p,r),E?$(d):f}function m(d){var x=d-u,L=d-l,Y=r-x;return S?Sr(Y,a-L):Y}function g(d){var x=d-u,L=d-l;return u===void 0||x>=r||x<0||S&&L>=a}function p(){var d=W();if(g(d))return v(d);c=setTimeout(p,m(d))}function v(d){return c=void 0,y&&o?$(d):(o=s=void 0,f)}function A(){c!==void 0&&clearTimeout(c),l=0,o=u=s=c=void 0}function _(){return c===void 0?f:v(W())}function h(){var d=W(),x=g(d);if(o=arguments,s=this,u=d,x){if(c===void 0)return n(u);if(S)return clearTimeout(c),c=setTimeout(p,r),$(u)}return c===void 0&&(c=setTimeout(p,r)),f}return h.cancel=A,h.flush=_,h}var _r=$r,Cr=_r,Tr=P,Lr="Expected a function";function Or(e,r,t){var o=!0,s=!0;if(typeof e!="function")throw new TypeError(Lr);return Tr(t)&&(o="leading"in t?!!t.leading:o,s="trailing"in t?!!t.trailing:s),Cr(e,r,{leading:o,maxWait:r,trailing:s})}var Er=Or;const Ir=T(Er);var Z={};const me=Je(Ze);var F={},b={};Object.defineProperty(b,"__esModule",{value:!0});b.getListeners=b.removeListener=b.addListener=void 0;const j={},wr=(e,r)=>{j[e]=j[e]||[],j[e].push(r)};b.addListener=wr;const Rr=(e,r)=>{j[e]=j[e]||[];const t=j[e].indexOf(r);t>-1&&j[e].splice(t,1)};b.removeListener=Rr;const kr=e=>j[e]||[];b.getListeners=kr;Object.defineProperty(F,"__esModule",{value:!0});const Mr=b;async function Pr(e,r){const t=(0,Mr.getListeners)(e);let o=[];for(const s of t){const a=await s(r);o.push(a)}return o}F.default=Pr;var K={};Object.defineProperty(K,"__esModule",{value:!0});const Fr=he,te=b;function Nr(e,r,t=null){(0,Fr.useEffect)(()=>((0,te.addListener)(e,r),()=>{(0,te.removeListener)(e,r)}),t)}K.default=Nr;var q={},V={};Object.defineProperty(V,"__esModule",{value:!0});V.default=e=>new Promise(r=>setTimeout(r,e));Object.defineProperty(q,"__esModule",{value:!0});const be=me,Ur=(0,be.__importDefault)(F),Br=(0,be.__importDefault)(V);async function ye(e,r){const t=await(0,Ur.default)(e,r);return t.length===0?(await(0,Br.default)(100),await ye(e,r)):t}q.default=ye;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getListeners=e.removeListener=e.addListener=e.waitAndFire=e.useOnEvent=e.fireEvent=void 0;const r=me,t=(0,r.__importDefault)(F);e.fireEvent=t.default;const o=b;Object.defineProperty(e,"addListener",{enumerable:!0,get:function(){return o.addListener}}),Object.defineProperty(e,"getListeners",{enumerable:!0,get:function(){return o.getListeners}}),Object.defineProperty(e,"removeListener",{enumerable:!0,get:function(){return o.removeListener}});const s=(0,r.__importDefault)(K);e.useOnEvent=s.default;const a=(0,r.__importDefault)(q);e.waitAndFire=a.default})(Z);function Wr(e,r){for(var t=-1,o=e==null?0:e.length,s=Array(o);++t<o;)s[t]=r(e[t],t,e);return s}var Dr=Wr,Hr=Array.isArray,X=Hr;const an=T(X);var oe=Ke,zr=Dr,Gr=X,Jr=ve,se=oe?oe.prototype:void 0,ae=se?se.toString:void 0;function Ae(e){if(typeof e=="string")return e;if(Gr(e))return zr(e,Ae)+"";if(Jr(e))return ae?ae.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}var Zr=Ae,Kr=Zr;function qr(e){return e==null?"":Kr(e)}var N=qr;function Vr(e,r,t){var o=-1,s=e.length;r<0&&(r=-r>s?0:s+r),t=t>s?s:t,t<0&&(t+=s),s=r>t?0:t-r>>>0,r>>>=0;for(var a=Array(s);++o<s;)a[o]=e[o+r];return a}var Xr=Vr,Yr=Xr;function Qr(e,r,t){var o=e.length;return t=t===void 0?o:t,!r&&t>=o?e:Yr(e,r,t)}var et=Qr,rt="\\ud800-\\udfff",tt="\\u0300-\\u036f",ot="\\ufe20-\\ufe2f",st="\\u20d0-\\u20ff",at=tt+ot+st,nt="\\ufe0e\\ufe0f",ut="\\u200d",it=RegExp("["+ut+rt+at+nt+"]");function ct(e){return it.test(e)}var xe=ct;function dt(e){return e.split("")}var lt=dt,je="\\ud800-\\udfff",ft="\\u0300-\\u036f",pt="\\ufe20-\\ufe2f",ht="\\u20d0-\\u20ff",gt=ft+pt+ht,vt="\\ufe0e\\ufe0f",mt="["+je+"]",D="["+gt+"]",H="\\ud83c[\\udffb-\\udfff]",bt="(?:"+D+"|"+H+")",Se="[^"+je+"]",$e="(?:\\ud83c[\\udde6-\\uddff]){2}",_e="[\\ud800-\\udbff][\\udc00-\\udfff]",yt="\\u200d",Ce=bt+"?",Te="["+vt+"]?",At="(?:"+yt+"(?:"+[Se,$e,_e].join("|")+")"+Te+Ce+")*",xt=Te+Ce+At,jt="(?:"+[Se+D+"?",D,$e,_e,mt].join("|")+")",St=RegExp(H+"(?="+H+")|"+jt+xt,"g");function $t(e){return e.match(St)||[]}var _t=$t,Ct=lt,Tt=xe,Lt=_t;function Ot(e){return Tt(e)?Lt(e):Ct(e)}var Et=Ot,It=et,wt=xe,Rt=Et,kt=N;function Mt(e){return function(r){r=kt(r);var t=wt(r)?Rt(r):void 0,o=t?t[0]:r.charAt(0),s=t?It(t,1).join(""):r.slice(1);return o[e]()+s}}var Pt=Mt,Ft=Pt,Nt=Ft("toUpperCase"),Ut=Nt,Bt=N,Wt=Ut;function Dt(e){return Wt(Bt(e).toLowerCase())}var Le=Dt;const nn=T(Le);function Ht(e,r,t,o){var s=-1,a=e==null?0:e.length;for(o&&a&&(t=e[++s]);++s<a;)t=r(t,e[s],s,e);return t}var zt=Ht;function Gt(e){return function(r){return e==null?void 0:e[r]}}var Jt=Gt,Zt=Jt,Kt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},qt=Zt(Kt),Vt=qt,Xt=Vt,Yt=N,Qt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,eo="\\u0300-\\u036f",ro="\\ufe20-\\ufe2f",to="\\u20d0-\\u20ff",oo=eo+ro+to,so="["+oo+"]",ao=RegExp(so,"g");function no(e){return e=Yt(e),e&&e.replace(Qt,Xt).replace(ao,"")}var uo=no,io=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function co(e){return e.match(io)||[]}var lo=co,fo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function po(e){return fo.test(e)}var ho=po,Oe="\\ud800-\\udfff",go="\\u0300-\\u036f",vo="\\ufe20-\\ufe2f",mo="\\u20d0-\\u20ff",bo=go+vo+mo,Ee="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",yo="\\xac\\xb1\\xd7\\xf7",Ao="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xo="\\u2000-\\u206f",jo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",we="A-Z\\xc0-\\xd6\\xd8-\\xde",So="\\ufe0e\\ufe0f",Re=yo+Ao+xo+jo,ke="['’]",ne="["+Re+"]",$o="["+bo+"]",Me="\\d+",_o="["+Ee+"]",Pe="["+Ie+"]",Fe="[^"+Oe+Re+Me+Ee+Ie+we+"]",Co="\\ud83c[\\udffb-\\udfff]",To="(?:"+$o+"|"+Co+")",Lo="[^"+Oe+"]",Ne="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",C="["+we+"]",Oo="\\u200d",ue="(?:"+Pe+"|"+Fe+")",Eo="(?:"+C+"|"+Fe+")",ie="(?:"+ke+"(?:d|ll|m|re|s|t|ve))?",ce="(?:"+ke+"(?:D|LL|M|RE|S|T|VE))?",Be=To+"?",We="["+So+"]?",Io="(?:"+Oo+"(?:"+[Lo,Ne,Ue].join("|")+")"+We+Be+")*",wo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ro="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ko=We+Be+Io,Mo="(?:"+[_o,Ne,Ue].join("|")+")"+ko,Po=RegExp([C+"?"+Pe+"+"+ie+"(?="+[ne,C,"$"].join("|")+")",Eo+"+"+ce+"(?="+[ne,C+ue,"$"].join("|")+")",C+"?"+ue+"+"+ie,C+"+"+ce,Ro,wo,Me,Mo].join("|"),"g");function Fo(e){return e.match(Po)||[]}var No=Fo,Uo=lo,Bo=ho,Wo=N,Do=No;function Ho(e,r,t){return e=Wo(e),r=t?void 0:r,r===void 0?Bo(e)?Do(e):Uo(e):e.match(r)||[]}var zo=Ho,Go=zt,Jo=uo,Zo=zo,Ko="['’]",qo=RegExp(Ko,"g");function Vo(e){return function(r){return Go(Zo(Jo(r).replace(qo,"")),e,"")}}var Xo=Vo,Yo=Le,Qo=Xo,es=Qo(function(e,r,t){return r=r.toLowerCase(),e+(t?Yo(r):r)}),rs=es;const ts=T(rs);function os(e,r){for(var t=-1,o=Array(e);++t<e;)o[t]=r(t);return o}var ss=os,as=G,ns=J,us="[object Arguments]";function is(e){return ns(e)&&as(e)==us}var cs=is,de=cs,ds=J,De=Object.prototype,ls=De.hasOwnProperty,fs=De.propertyIsEnumerable,ps=de(function(){return arguments}())?de:function(e){return ds(e)&&ls.call(e,"callee")&&!fs.call(e,"callee")},hs=ps,I={exports:{}};function gs(){return!1}var vs=gs;I.exports;(function(e,r){var t=ge,o=vs,s=r&&!r.nodeType&&r,a=s&&!0&&e&&!e.nodeType&&e,f=a&&a.exports===s,c=f?t.Buffer:void 0,u=c?c.isBuffer:void 0,l=u||o;e.exports=l})(I,I.exports);var ms=I.exports,bs=9007199254740991,ys=/^(?:0|[1-9]\d*)$/;function As(e,r){var t=typeof e;return r=r??bs,!!r&&(t=="number"||t!="symbol"&&ys.test(e))&&e>-1&&e%1==0&&e<r}var xs=As,js=9007199254740991;function Ss(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=js}var He=Ss,$s=G,_s=He,Cs=J,Ts="[object Arguments]",Ls="[object Array]",Os="[object Boolean]",Es="[object Date]",Is="[object Error]",ws="[object Function]",Rs="[object Map]",ks="[object Number]",Ms="[object Object]",Ps="[object RegExp]",Fs="[object Set]",Ns="[object String]",Us="[object WeakMap]",Bs="[object ArrayBuffer]",Ws="[object DataView]",Ds="[object Float32Array]",Hs="[object Float64Array]",zs="[object Int8Array]",Gs="[object Int16Array]",Js="[object Int32Array]",Zs="[object Uint8Array]",Ks="[object Uint8ClampedArray]",qs="[object Uint16Array]",Vs="[object Uint32Array]",i={};i[Ds]=i[Hs]=i[zs]=i[Gs]=i[Js]=i[Zs]=i[Ks]=i[qs]=i[Vs]=!0;i[Ts]=i[Ls]=i[Bs]=i[Os]=i[Ws]=i[Es]=i[Is]=i[ws]=i[Rs]=i[ks]=i[Ms]=i[Ps]=i[Fs]=i[Ns]=i[Us]=!1;function Xs(e){return Cs(e)&&_s(e.length)&&!!i[$s(e)]}var Ys=Xs;function Qs(e){return function(r){return e(r)}}var ea=Qs,w={exports:{}};w.exports;(function(e,r){var t=qe,o=r&&!r.nodeType&&r,s=o&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===o,f=a&&t.process,c=function(){try{var u=s&&s.require&&s.require("util").types;return u||f&&f.binding&&f.binding("util")}catch{}}();e.exports=c})(w,w.exports);var ra=w.exports,ta=Ys,oa=ea,le=ra,fe=le&&le.isTypedArray,sa=fe?oa(fe):ta,aa=sa,na=ss,ua=hs,ia=X,ca=ms,da=xs,la=aa,fa=Object.prototype,pa=fa.hasOwnProperty;function ha(e,r){var t=ia(e),o=!t&&ua(e),s=!t&&!o&&ca(e),a=!t&&!o&&!s&&la(e),f=t||o||s||a,c=f?na(e.length,String):[],u=c.length;for(var l in e)(r||pa.call(e,l))&&!(f&&(l=="length"||s&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||da(l,u)))&&c.push(l);return c}var ga=ha,va=Object.prototype;function ma(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||va;return e===t}var ba=ma;function ya(e,r){return function(t){return e(r(t))}}var Aa=ya,xa=Aa,ja=xa(Object.keys,Object),Sa=ja,$a=ba,_a=Sa,Ca=Object.prototype,Ta=Ca.hasOwnProperty;function La(e){if(!$a(e))return _a(e);var r=[];for(var t in Object(e))Ta.call(e,t)&&t!="constructor"&&r.push(t);return r}var Oa=La,Ea=G,Ia=P,wa="[object AsyncFunction]",Ra="[object Function]",ka="[object GeneratorFunction]",Ma="[object Proxy]";function Pa(e){if(!Ia(e))return!1;var r=Ea(e);return r==Ra||r==ka||r==wa||r==Ma}var Fa=Pa,Na=Fa,Ua=He;function Ba(e){return e!=null&&Ua(e.length)&&!Na(e)}var Wa=Ba,Da=ga,Ha=Oa,za=Wa;function Ga(e){return za(e)?Da(e):Ha(e)}var Ja=Ga;const Za=T(Ja),ze={main:{urls:{local:"http://localhost:3000",dev:"https://api.bejusto.com",prod:"https://websites-remix-main.service.getjusto.com"}},webdata:{urls:{local:"http://localhost:4125",dev:"https://webdata.service.bejusto.com",prod:"https://webdatacdn.getjusto.com"}},auth:{urls:{local:"http://localhost:4112",dev:"https://auth.service.bejusto.com",prod:"https://auth.service.getjusto.com"}},example:{urls:{local:"http://localhost:4100",dev:"https://example-orionjs.service.bejusto.com",prod:"https://example-orionjs.service.getjusto.com"}},buckets:{urls:{local:"http://localhost:4106",dev:"https://buckets.service.bejusto.com",prod:"https://buckets.service.getjusto.com"}},reservations:{urls:{local:"http://localhost:4113",dev:"https://reservations.service.bejusto.com",prod:"https://reservations.service.getjusto.com"}},data:{urls:{local:"http://localhost:4107",dev:"https://data.service.bejusto.com",prod:"https://data.service.getjusto.com"}},finances:{urls:{local:"http://localhost:4105",dev:"https://finances.service.bejusto.com",prod:"https://finances.service.getjusto.com"}},tabs:{urls:{local:"http://localhost:4115",dev:"https://tabs.service.bejusto.com",prod:"https://tabs.service.getjusto.com"}},commander:{urls:{local:"http://localhost:4109",dev:"https://commander.service.bejusto.com",prod:"https://commander.service.getjusto.com"}},linear:{urls:{local:"http://localhost:4107/linear",dev:"https://data.service.bejusto.com/linear",prod:"https://data.service.getjusto.com/linear"}},"bank-transfers":{urls:{local:"http://localhost:4150",dev:"https://bank-transfers.service.bejusto.com",prod:"https://bank-transfers.service.getjusto.com"}},experiments:{urls:{local:"http://localhost:4114",dev:"https://experiments.service.bejusto.com",prod:"https://experiments.service.getjusto.com"}},sales:{urls:{local:"http://localhost:4117",dev:"https://sales.service.bejusto.com",prod:"https://sales.service.getjusto.com"}},delivery:{urls:{local:"http://localhost:3410",dev:"https://api-delivery.bejusto.com",prod:"https://api-delivery-2.getjusto.com"}},payments:{urls:{local:"http://localhost:4118",dev:"https://payments.service.bejusto.com",prod:"https://payments.service.getjusto.com"}},addresses:{urls:{local:"http://localhost:4051",dev:"https://addresses.service.bejusto.com",prod:"https://addresses.service.getjusto.com"}},royalty:{urls:{local:"http://localhost:4121",dev:"https://royalty.service.bejusto.com",prod:"https://royalty.service.getjusto.com"}},marketing:{urls:{local:"http://localhost:4005",dev:"https://marketing.service.bejusto.com",prod:"https://marketing.service.getjusto.com"}},api:{urls:{local:"http://localhost:4119",dev:"https://api.service.bejusto.com",prod:"https://api.service.getjusto.com"}},messenger:{urls:{local:"http://localhost:4122",dev:"https://messenger.service.bejusto.com",prod:"https://messenger.service.getjusto.com"}},invoice:{urls:{local:"http://localhost:4123",dev:"https://invoice.service.bejusto.com",prod:"https://invoice.service.getjusto.com"}},preferences:{urls:{local:"http://localhost:4120",dev:"https://preferences.service.bejusto.com",prod:"https://preferences.service.getjusto.com"}}},un=Za(ze).reduce((e,r)=>(e[ts(r)]=r,e),{});function cn(){window.parent.postMessage({type:"goBack"},"*")}function dn(){window.parent.postMessage({type:"login"},"*")}function Ka(){window.parent.postMessage({type:"logout"},"*")}if(Ve){const e={local:"http://pide.internal:5140",prod:"https://pide.getjusto.com"}[k];window.addEventListener("message",r=>{if(r.origin!==e)return;const t=r.data;t.type==="setSession"&&O(t.token,t.refresh)},!1)}var R={exports:{}};/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */R.exports;(function(e,r){(function(t){var o=r,s=e.exports==o&&e,a=typeof B=="object"&&B;(a.global===a||a.window===a)&&(t=a);var f=function(n){this.message=n};f.prototype=new Error,f.prototype.name="InvalidCharacterError";var c=function(n){throw new f(n)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,E=function(n){n=String(n).replace(l,"");var m=n.length;m%4==0&&(n=n.replace(/==?$/,""),m=n.length),(m%4==1||/[^+a-zA-Z0-9/]/.test(n))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var g=0,p,v,A="",_=-1;++_<m;)v=u.indexOf(n.charAt(_)),p=g%4?p*64+v:v,g++%4&&(A+=String.fromCharCode(255&p>>(-2*g&6)));return A},S=function(n){n=String(n),/[^\0-\xFF]/.test(n)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var m=n.length%3,g="",p=-1,v,A,_,h,d=n.length-m;++p<d;)v=n.charCodeAt(p)<<16,A=n.charCodeAt(++p)<<8,_=n.charCodeAt(++p),h=v+A+_,g+=u.charAt(h>>18&63)+u.charAt(h>>12&63)+u.charAt(h>>6&63)+u.charAt(h&63);return m==2?(v=n.charCodeAt(p)<<8,A=n.charCodeAt(++p),h=v+A,g+=u.charAt(h>>10)+u.charAt(h>>4&63)+u.charAt(h<<2&63)+"="):m==1&&(h=n.charCodeAt(p),g+=u.charAt(h>>2)+u.charAt(h<<4&63)+"=="),g},y={encode:S,decode:E,version:"1.0.0"};if(o&&!o.nodeType)if(s)s.exports=y;else for(var $ in y)y.hasOwnProperty($)&&(o[$]=y[$]);else t.base64=y})(B)})(R,R.exports);var qa=R.exports;const Va=T(qa),{decode:Xa}=Va;function Ya(e){const t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(Xa(t).split("").map(a=>`%${`00${a.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),{data:s}=JSON.parse(o);return s}const U=k==="local"?"justo-session-local":"justo-session";function Ge(){if(M)return{};const e=localStorage.getItem(U);if(e)return JSON.parse(e)||{};const r=Qa();return r||{}}function Qa(){const e=localStorage.getItem("justo_jwt_refresh");if(!e)return null;const r=localStorage.getItem("justo_jwt_token");if(!r)return null;console.log("Upgrading session from webv2"),O(r,e);const t=localStorage.getItem(U);if(t)return JSON.parse(t)||{}}function pe(e){M||localStorage.setItem(U,JSON.stringify(e))}function O(e,r){if(M)return;if(!e){Z.fireEvent("onWillLogout",{}),localStorage.removeItem("justo_jwt_refresh"),localStorage.removeItem("justo_jwt_token"),pe(null),z();return}const t=Ya(e),o=r?{}:Ge()||{};pe({jwt:e,refresh:r||o.refresh,...t}),r&&z()}function z(){Z.fireEvent("onSessionUpdated",{})}function ln(){const e=er();return()=>{M||(localStorage.removeItem(U),localStorage.removeItem("justo_jwt_refresh"),localStorage.removeItem("justo_jwt_token"),z(),e.customLogin==="pide"&&Ka())}}const en=Ir(async()=>{const{refresh:e}=Ge();if(!e){console.log("removing session because no refresh token"),O(null);return}console.log("trying to refresh token"),console.log("refresh",e.substring(0,6));const t=await(await fetch(`${ze.auth.urls[k]}/refresh-token`,{method:"POST",headers:{"X-ORION-REFRESH":e||null}})).json();if(t.error||!t.token){console.log("Error refreshing JWT. Will reset Session"),O(null);return}O(t.token)},5e3,{leading:!0,trailing:!1});async function fn(){await en()}export{ea as A,ra as B,He as C,fn as D,Qe as E,Aa as F,ga as G,Xr as H,nn as I,xs as _,P as a,yr as b,un as c,Oa as d,hs as e,X as f,Ge as g,ms as h,Wa as i,ba as j,aa as k,dn as l,ze as m,an as n,z as o,Za as p,Z as q,ln as r,O as s,N as t,er as u,cn as v,me as w,Fa as x,Ja as y,Dr as z};

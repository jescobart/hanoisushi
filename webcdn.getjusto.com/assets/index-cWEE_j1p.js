import{r,j as i}from"./jsx-runtime-BGxL3LVy.js";import{o as w}from"./apollo-hooks.es-DZ97-Of4.js";import{B as N}from"./button-B9Ixe4GG.js";import{c as m}from"./utils-mMyIM9tf.js";import{u as I}from"./index-CXeFjl5i.js";import{c as A}from"./createLucideIcon-gj9TAl09.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=A("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var o=(e=>(e.error="button_click_response_action_error",e.success="button_click_response_action_success",e))(o||{});const F=Object.values(o);function L(){const[e,a]=r.useState(null);function s(n){n&&(n.error&&(n="button_click_response_action_error"),F.includes(n)&&(a(n),setTimeout(()=>a(null),500)))}return{responseActionStatus:e,setResponseActionStatus:s}}function T(e,a){const[s,n]=r.useState(!1),l=r.useRef(),c=e.loading||s,[h,k]=r.useState(!1),u=r.useRef(),[x,g]=r.useState(null),v=I(),{responseActionStatus:S,setResponseActionStatus:b}=L(),f=async()=>{if(e.disabled||c||!e.onClick&&!e.to)return;if(e.confirmText)if(h)k(!1);else{k(!0);return}n(!0);let t=null;try{u.current?t=await u.current():e.onClick?t=await e.onClick():e.to&&v(e.to)}catch(R){console.error("Uncaught error inside button onClick",R),t=o.error}l.current&&n(!1),b(t)},_=t=>{u.current=t},C=t=>{g(t)};r.useImperativeHandle(a,()=>({onClick:f,setOnClick:_,setFormId:C,click:f,focus:()=>{var t;(t=l.current)==null||t.focus()}}));const j=w(e,"loading","confirmText","disabled","onClick","to","className","variant","full","icon"),d=e.disabled||c;return i.jsx(N,{...j,variant:e.variant,className:m({"animate-shake":S===o.error,"w-full":e.full,"bg-muted text-muted-foreground shadow-sm":e.variant!=="link"&&d,"text-muted-foreground":e.variant==="link"&&d},e.className),ref:l,form:x,disabled:d,onClick:f,children:e.asChild?e.children:i.jsxs(i.Fragment,{children:[c&&!["link"].includes(e.variant)&&i.jsx(B,{className:m("h-4 w-4 animate-spin",{"mr-2":e.children})}),!c&&e.icon&&i.jsx(e.icon,{className:m("h-4 w-4",{"mr-2":e.children})}),e.children&&i.jsx(i.Fragment,{children:h?e.confirmText:e.children})]})})}const M=r.forwardRef(T);export{M as B,o as a};

import{w as x,f as ce,x as de}from"./index-Dg1ijqza.js";import{r as C,j as N,a as fe}from"./jsx-runtime-BGxL3LVy.js";import{b as _e,c as me,d as he}from"./index-Dz7ujoPl.js";import{r as re}from"./get---A8iXU-.js";import{g as ne,h as pe,j as se,k as Ce}from"./apollo-hooks.es-DZ97-Of4.js";import{a as ge}from"./isEqual-iux_d1W7.js";var ve={},P={},L,T;function xe(){if(T)return L;T=1;var t=_e(),e=me,r=he(),n=e(function(s,c){return r(s)?t(s,c):[]});return L=n,L}var d={},k;function j(){if(k)return d;k=1,Object.defineProperty(d,"__esModule",{value:!0}),d.ParentFieldNameContext=d.OnChangeContext=d.ErrorMessagesContext=d.ValueContext=d.useFormOnChangeContext=d.useErrorMessagesContext=d.useFormParentFieldNameContext=d.useFormValueContext=void 0;const e=x.__importStar(C),r=e.default.createContext({});d.ValueContext=r;const n=e.default.createContext(null);d.ParentFieldNameContext=n;const s=e.default.createContext({});d.ErrorMessagesContext=s;const c=e.default.createContext((h,o)=>{});d.OnChangeContext=c;function a(){return(0,e.useContext)(r)}d.useFormValueContext=a;function p(){return(0,e.useContext)(n)}d.useFormParentFieldNameContext=p;function l(){return(0,e.useContext)(s)}d.useErrorMessagesContext=l;function i(){return(0,e.useContext)(c)}return d.useFormOnChangeContext=i,d}var V={},M={},z;function ue(){return z||(z=1,Object.defineProperty(M,"__esModule",{value:!0}),M.fieldPropsKeys=void 0,M.fieldPropsKeys=["fieldName","type","value","parentValue","label","errorMessage","onChange","fieldSchema","schema","passProps"]),M}var G;function oe(){if(G)return V;G=1,Object.defineProperty(V,"__esModule",{value:!0});const t=x,e=N,r=t.__importDefault(re()),n=t.__importDefault(ne),s=C,c=j(),a=ue();function p(i,h){const o=(0,s.useContext)(c.ValueContext),u=(0,s.useContext)(c.ErrorMessagesContext)||{},_=(0,s.useContext)(c.OnChangeContext),m=(0,s.useContext)(c.ParentFieldNameContext),f=(0,s.useMemo)(()=>m?i.fieldName?`${m}.${i.fieldName}`:m:i.fieldName,[m,i.fieldName]),y=(0,s.useMemo)(()=>i.errorMessage||u[f]||(0,r.default)(u,f),[f,i.errorMessage,u]),v=(0,s.useMemo)(()=>{const O=(0,n.default)(i,["fieldName","type","errorMessage"]),S=[...a.fieldPropsKeys,"type"],g=(0,n.default)(O,S);return{...O,value:(0,r.default)(o||{},i.fieldName),parentValue:o||{},onChange:$=>_(f,$),errorMessage:y,fieldName:f,passProps:g}},[i,o,f,y]),D=i.type,b=D.prototype.render?h:null;return(0,e.jsx)(c.ValueContext.Provider,{value:v.value,children:(0,e.jsx)(c.ParentFieldNameContext.Provider,{value:v.fieldName,children:(0,e.jsx)(D,{...v,ref:b})})})}const l=(0,s.forwardRef)(p);return V.default=l,V}var q={},K;function ie(){if(K)return q;K=1,Object.defineProperty(q,"__esModule",{value:!0});const t=x,e=N,r=t.__importDefault(C);class n extends r.default.Component{getChildrenComponents(){return this.renderChildrenComponent()}renderChildrenComponent(){return(0,e.jsx)(e.Fragment,{children:this.props.children})}renderErrorMessage(){if(this.props.errorMessage)return(0,e.jsx)("div",{style:{color:"red"},className:"srf_errorMessage",children:this.props.errorMessage})}render(){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)("b",{children:this.props.label})}),this.renderErrorMessage(),this.getChildrenComponents()]})}}return q.default=n,q}var U;function je(){if(U)return P;U=1,Object.defineProperty(P,"__esModule",{value:!0});const t=x,e=N,r=t.__importDefault(ce),n=t.__importDefault(xe()),s=t.__importDefault(C),c=j(),a=t.__importDefault(oe()),p=t.__importDefault(ie()),l={addLabel:"Add",removeLabel:"Remove",errorMessages:{},autoAddItem:!1,showAddButton:!0,showRemoveButton:!0,renderProps:!1};class i extends s.default.Component{addItem(o={}){var u=this.props.value;(0,r.default)(u)?u.push(o):u=[o],this.props.onChange(u)}getObjectField(){return p.default}removeItem(o){const u=this.props.value||[];var _=(0,n.default)(u,u[o]);this.props.onChange(_)}getChildrenComponents(o,u){if(this.props.renderItem)return this.props.renderItem(o,u);if(this.props.children)return this.props.children}renderChildren(){const o=this.props.value||[];return this.props.autoAddItem&&!this.props.disabled&&o.length===0&&o.push({}),o.map((u,_)=>{const m=this.getChildrenComponents(u,_);return this.renderChildrenItem({index:_,children:m})})}renderChildrenItem({index:o,children:u}){const _=this.props.showRemoveButton?this.renderButton(()=>this.removeItem(o),this.props.removeLabel,"srf_removeButton"):null;return(0,e.jsxs)("div",{style:{marginTop:20,marginBottom:20,padding:20},children:[this.renderChildrenItemWithContext({index:o,children:u}),_]},`${this.props.fieldName}.${o}`)}renderChildrenItemWithContext({index:o,children:u}){return(0,e.jsx)(c.ParentFieldNameContext.Provider,{value:this.props.fieldName,children:(0,e.jsx)(a.default,{fieldName:String(o),type:this.getObjectField(),children:this.props.renderProps?u(o):u})},o)}renderButton(o,u,_){return(0,e.jsx)("div",{style:{marginTop:10},children:(0,e.jsx)("button",{type:"button",className:_,onClick:o,children:u})})}renderErrorMessage(){if(this.props.errorMessage)return(0,e.jsx)("div",{style:{color:"red"},className:"srf_errorMessage",children:this.props.errorMessage})}render(){return(0,e.jsxs)("div",{className:"srf-array-container",style:{marginTop:20},children:[(0,e.jsx)("div",{children:(0,e.jsx)("b",{children:this.props.label})}),this.renderErrorMessage(),this.renderChildren(),this.props.showAddButton?this.renderButton(()=>this.addItem(),this.props.addLabel,"srf_addButton"):null]})}}return i.defaultProps=l,P.default=i,P}var R={},B,H;function ae(){if(H)return B;H=1;var t=pe,e=1,r=4;function n(s){return t(s,e|r)}return B=n,B}var Y=Object.prototype.hasOwnProperty;function J(t,e,r){for(r of t.keys())if(F(r,e))return r}function F(t,e){var r,n,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&F(t[n],e[n]););return n===-1}if(r===Set){if(t.size!==e.size)return!1;for(n of t)if(s=n,s&&typeof s=="object"&&(s=J(e,s),!s)||!e.has(s))return!1;return!0}if(r===Map){if(t.size!==e.size)return!1;for(n of t)if(s=n[0],s&&typeof s=="object"&&(s=J(e,s),!s)||!F(n[1],e.get(s)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(Y.call(t,r)&&++n&&!Y.call(e,r)||!(r in e)||!F(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}function W(t){var e=C.useRef(t),r=C.useRef(0);return F(t,e.current)||(e.current=t,r.current+=1),C.useMemo(function(){return e.current},[r.current])}function ye(t,e){return C.useEffect(t,W(e))}function be(t,e){return C.useEffect(t,W(e))}const Me=Object.freeze(Object.defineProperty({__proto__:null,default:ye,useDeepCompareEffectNoCheck:be,useDeepCompareMemoize:W},Symbol.toStringTag,{value:"Module"})),Fe=fe(Me);var E={},Q;function Ne(){if(Q)return E;Q=1,Object.defineProperty(E,"__esModule",{value:!0});function t(){return typeof navigator<"u"&&navigator.product==="ReactNative"}return E.default=t,E}var w={},X;function De(){if(X)return w;X=1,Object.defineProperty(w,"__esModule",{value:!0});const t=x,e=t.__importDefault(ae()),r=t.__importDefault(re()),n=t.__importDefault(de),s=t.__importDefault(se),c=t.__importDefault(Ce),a=(l,i,h)=>{const o=i.shift();if(i.length===0)l[o]=h;else{if(Number.isInteger(Number.parseInt(i[0])))(0,s.default)(l[o])&&(l[o]=[]);else if((0,s.default)(l[o])&&(l[o]={}),!(0,c.default)(l[o]))throw new Error(`Expected plain object for key ${o}`);a(l[o],i,h)}};function p(l,i,h){const o=(0,e.default)(l),u=i.split(".");if((0,n.default)(h)){const _=(0,r.default)(o,i),m=h(_);a(o,u,m)}else a(o,u,h);return o}return w.default=p,w}var Z;function Oe(){if(Z)return R;Z=1,Object.defineProperty(R,"__esModule",{value:!0});const t=x,e=N,r=t.__importDefault(ae()),n=t.__importDefault(ge),s=t.__importDefault(se),c=t.__importDefault(ne),a=C,p=t.__importDefault(Fe),l=j(),i=t.__importDefault(Ne()),h=t.__importDefault(De());function o(u,_){const m=(0,a.useMemo)(()=>(0,r.default)(u.state||{}),[u.state]),[f,y]=(0,a.useState)(m),v=(0,a.useCallback)(()=>{(0,n.default)(m,f)||y(m)},[m,f]);(0,p.default)(()=>{(0,s.default)(u.state)||v()},[u.state||{}]),(0,a.useEffect)(()=>{u.onChange&&((0,n.default)(m,f)||u.onChange(f))},[f]);const D=(0,a.useCallback)((g,$)=>{y(le=>(0,h.default)(le,g,$))},[]),b=(0,a.useCallback)(()=>{var g;(g=u.onSubmit)==null||g.call(u,f)},[f,u.onSubmit]),O=g=>(g.preventDefault(),b());(0,a.useImperativeHandle)(_,()=>({submit:b,getValue:()=>f,reset:v}),[v,f,b]);const S=()=>{const g=(0,c.default)(u,"children","state","onChange","errorMessages","useFormTag","onSubmit");return(0,i.default)()?u.children:u.useFormTag!==!1?(0,e.jsx)("form",{...g,onSubmit:O,children:u.children}):u.children};return(0,e.jsx)(l.ParentFieldNameContext.Provider,{value:null,children:(0,e.jsx)(l.ErrorMessagesContext.Provider,{value:u.errorMessages,children:(0,e.jsx)(l.OnChangeContext.Provider,{value:D,children:(0,e.jsx)(l.ValueContext.Provider,{value:f,children:S()})})})})}return R.default=(0,a.forwardRef)(o),R}var A={},ee;function Pe(){if(ee)return A;ee=1,Object.defineProperty(A,"__esModule",{value:!0});const t=N,e=j();function r(n){return(0,t.jsx)(e.ValueContext.Consumer,{children:s=>n.children(s)})}return A.default=r,A}var I={},te;function Ve(){if(te)return I;te=1,Object.defineProperty(I,"__esModule",{value:!0});const t=C,e=j();function r(){return(0,t.useContext)(e.ValueContext)}return I.default=r,I}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useValue=t.WithValue=t.ObjectComponent=t.ArrayComponent=t.Field=t.Form=void 0;const e=x,r=e.__importDefault(je());t.ArrayComponent=r.default;const n=e.__importDefault(oe());t.Field=n.default;const s=e.__importDefault(Oe());t.Form=s.default;const c=e.__importDefault(ie());t.ObjectComponent=c.default;const a=e.__importDefault(Pe());t.WithValue=a.default;const p=e.__importDefault(Ve());t.useValue=p.default,e.__exportStar(j(),t),e.__exportStar(ue(),t)})(ve);export{F as d,ve as l,xe as r};

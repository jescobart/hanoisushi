import{r as c}from"./jsx-runtime-BGxL3LVy.js";import{i as r}from"./env-D6s-xqZ4.js";const f=t=>(window.addEventListener("storage",t),()=>window.removeEventListener("storage",t));function S(t,e){r||window.dispatchEvent(new StorageEvent("storage",{key:t,newValue:e}))}const i=(t,e)=>{if(r)return;const n=JSON.stringify(e);window.localStorage.setItem(t,n),S(t,n)},l=t=>{r||(window.localStorage.removeItem(t),S(t,null))},u=t=>{if(!r)return window.localStorage.getItem(t)};function m(t,e){if(r)return[e,()=>{}];const n=()=>u(t),s=c.useSyncExternalStore(f,n,()=>null),g=c.useCallback(a=>{try{const o=typeof a=="function"?a(JSON.parse(s)):a;o==null?l(t):i(t,o)}catch(o){console.warn(o)}},[t,s]);return c.useEffect(()=>{u(t)===null&&i(t,e)},[t,e]),[s?JSON.parse(s):e,g]}export{u as g,i as s,m as u};
